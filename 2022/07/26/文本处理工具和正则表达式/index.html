<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico"><link rel="icon" href="/img/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="勒马听风"><meta name="keywords" content="hexo,theme,fluid,linux,ops,运维,分享"><meta name="description" content="本文将介绍Linux下使用Shell处理文本时最常用的工具并结合正则表达式处理文本。"><meta property="og:type" content="article"><meta property="og:title" content="文本处理工具和正则表达式"><meta property="og:url" content="https://itshare.work/2022/07/26/%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html"><meta property="og:site_name" content="echops-懂运维的测试"><meta property="og:description" content="本文将介绍Linux下使用Shell处理文本时最常用的工具并结合正则表达式处理文本。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://itshare.work/banner_img/default.png"><meta property="article:published_time" content="2022-07-26T12:09:30.000Z"><meta property="article:modified_time" content="2022-12-16T14:57:11.557Z"><meta property="article:author" content="yuankun"><meta property="article:tag" content="Linux从入门到放弃"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://itshare.work/banner_img/default.png"><title>文本处理工具和正则表达式 - echops-懂运维的测试</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/tbdzj.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"itshare.work",root:"/",version:"1.9.3",typing:{enable:!1,typeSpeed:70,cursorChar:" ",loop:!0,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"text"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"hQDROocUhxVs3CipuQjO33sY-gzGzoHsz",app_key:"CHcmi9bz6KRRaChFJVSY14g1",server_url:"https://hqdroocu.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>echops</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 文章</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档 </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类 </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">文本处理工具和正则表达式</span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-07-26 20:09" pubdate>2022年7月26日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 18k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 147 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">文本处理工具和正则表达式</h1><div class="markdown-body"><h1 id="1-文本编辑工具之神VIM"><a href="#1-文本编辑工具之神VIM" class="headerlink" title="1.文本编辑工具之神VIM"></a>1.文本编辑工具之神VIM</h1><h2 id="1-1使用vim初步"><a href="#1-1使用vim初步" class="headerlink" title="1.1使用vim初步"></a>1.1使用vim初步</h2><h3 id="1-1-1vim命令格式"><a href="#1-1-1vim命令格式" class="headerlink" title="1.1.1vim命令格式"></a>1.1.1vim命令格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 常用">vim [option]··· FILE ···<br></code></pre></td></tr></table></figure><p>常用选项：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean">+# 打开文件后，让光标处于第#行的行首，+默认行尾<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">vim</span> +<span class="hljs-number">10</span> passwd<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658842039807.png" srcset="/img/loading.gif" lazyload alt="1658842039807"></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">+/PATTERN 让光标处于第一个被PATTERN匹配到的行行首<br>-<span class="hljs-keyword">b</span> <span class="hljs-keyword">file</span> 二进制方式打开文件<br>-d file1 file2… 比较多个文件，相当于 vimdiff<br>-<span class="hljs-keyword">m</span> <span class="hljs-keyword">file</span> 只读打开文件<br>-<span class="hljs-keyword">e</span> <span class="hljs-keyword">file</span> 直接进入<span class="hljs-keyword">ex</span>模式，相当于执行<span class="hljs-keyword">ex</span> <span class="hljs-keyword">file</span><br>-<span class="hljs-keyword">y</span> <span class="hljs-keyword">file</span> Easy <span class="hljs-keyword">mode</span> (like <span class="hljs-string">&quot;evim&quot;</span>, modeless)，直接可以操作文件，ctrl+<span class="hljs-keyword">o</span>:<span class="hljs-keyword">wq</span>|q! 保存和不<br>保存退出<br></code></pre></td></tr></table></figure><p>说明：</p><ul><li>如果该文件存在，文件被打开并显示内容</li><li>如果该文件不存在，当编辑后第一次存盘时创建它</li></ul><h3 id="1-1-2三种主要模式"><a href="#1-1-2三种主要模式" class="headerlink" title="1.1.2三种主要模式"></a>1.1.2三种主要模式</h3><p>三种常见模式：</p><ul><li><p>命令或普通(Normal)模式：默认模式，可以实现移动光标，剪切&#x2F;粘贴文本</p></li><li><p>插入(Insert)或编辑模式：用于修改文本</p></li><li><p>扩展命令(extended command )或命令(末)行模式：保存，退出等</p></li><li><p>命令模式–》插入模式</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span> insert, 在光标所在处输入<br><span class="hljs-selector-tag">I</span> 在当前光标所在行的行首输入<br><span class="hljs-selector-tag">a</span> append, 在光标所在处后面输入<br><span class="hljs-selector-tag">A</span> 在当前光标所在行的行尾输入<br>o 在当前光标所在行的下方打开一个新行<br>O 在当前光标所在行的上方打开一个新行<br></code></pre></td></tr></table></figure><ul><li>插入模式 — ESC—–&gt; 命令模式</li><li>命令模式 —- : —-&gt; 扩展命令模式</li><li>扩展命令模式 —-ESC,enter—-&gt; 命令模式</li></ul><p>范例: 插入颜色字符</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span>切换至插入模式<br><span class="hljs-symbol">2 </span>按ctrl+v+[ 三个键,显示^[<br><span class="hljs-symbol">3 </span>后续输入颜色信息,如:^[[<span class="hljs-number">32</span>mhello^[[<span class="hljs-number">0</span>m<br><span class="hljs-symbol">4 </span>切换至扩展命令模式,保存退出<br><span class="hljs-symbol">5 </span>cat 文件可以看到下面显示<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658842714254.png" srcset="/img/loading.gif" lazyload alt="1658842714254"></p><p><img src="/../image.assets/1658842736134.png" srcset="/img/loading.gif" lazyload alt="1658842736134"></p><h2 id="1-2扩展命令模式"><a href="#1-2扩展命令模式" class="headerlink" title="1.2扩展命令模式"></a>1.2扩展命令模式</h2><p>按“:”（冒号）进入Ex模式，创建一个命令提示符：处于底部的屏幕左侧</p><h3 id="1-2-1扩展模式基本命令"><a href="#1-2-1扩展模式基本命令" class="headerlink" title="1.2.1扩展模式基本命令"></a>1.2.1扩展模式基本命令</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">w 写（存）磁盘文件<br>wq 写入并退出<br>x 写入并退出<br>X 加密<br><span class="hljs-selector-tag">q</span> 退出<br><span class="hljs-selector-tag">q</span>！ 不存盘退出，即使更改都将丢失<br></code></pre></td></tr></table></figure><ul><li>读取文件内容到当前文件中</li></ul><p>用法：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">r</span> filename	<span class="hljs-comment"># 读文件内容到当前文件中</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"># 将当前目录下的<span class="hljs-selector-tag">b</span>文件的内容读取到当前文件中<br><span class="hljs-selector-tag">vim</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span><br>:<span class="hljs-selector-tag">r</span> <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.txt</span><br></code></pre></td></tr></table></figure><ul><li>将当前文件内容写入另一个文件</li></ul><p>用法：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">w</span> filename <span class="hljs-comment"># 将当前文件内容写入另一个文件</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"># 将当前文件(<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span>文件)内容写入到<span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.txt</span>中去<br>vim <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span><br>w c<span class="hljs-selector-class">.txt</span><br></code></pre></td></tr></table></figure><ul><li>执行命令</li></ul><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">!<span class="hljs-built_in">command</span>	<span class="hljs-comment">#执行命令</span><br></code></pre></td></tr></table></figure><p>范例：</p><p><img src="/../image.assets/1658844469691.png" srcset="/img/loading.gif" lazyload alt="1658844469691"></p><ul><li>读入命令的输入</li></ul><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">r!<span class="hljs-built_in">command</span>	<span class="hljs-comment">#读入命令的输入</span><br></code></pre></td></tr></table></figure><p>范例：执行hostname命令输入到当前文件中</p><p><img src="/../image.assets/1658844624368.png" srcset="/img/loading.gif" lazyload alt="1658844624368"></p><h3 id="1-2-2地址定界"><a href="#1-2-2地址定界" class="headerlink" title="1.2.2地址定界"></a>1.2.2地址定界</h3><p>格式：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">:start_pos,end_pos <span class="hljs-keyword">CMD</span><br></code></pre></td></tr></table></figure><h4 id="1-2-2-1地址定界格式"><a href="#1-2-2-1地址定界格式" class="headerlink" title="1.2.2.1地址定界格式"></a>1.2.2.1地址定界格式</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs clean"># #具体第#行，例如<span class="hljs-number">2</span>表示第<span class="hljs-number">2</span>行<br>#,# #从左侧#表示起始行，到右侧#表示结尾行<br>#,+# #从左侧#表示的起始行，加上右侧#表示的行数，范例：<span class="hljs-number">2</span>,+<span class="hljs-number">3</span> 表示<span class="hljs-number">2</span>到<span class="hljs-number">5</span>行<br>. #当前行<br>$ #最后一行<br>.,$<span class="hljs-number">-1</span> #当前行到倒数第二行<br>% #全文, 相当于<span class="hljs-number">1</span>,$<br>/pattern/ #从当前行向下查找，直到匹配pattern的第一行,即:正则表达式<br>/pat1/,/pat2/ #从第一次被pat1模式匹配到的行开始，一直到第一次被pat2匹配到的行结束<br>#,/pat/ #从指定行开始，一直找到第一个匹配pattern的行结束<br>/pat/,$ #向下找到第一个匹配patttern的行到整个文件的结尾的所有行<br></code></pre></td></tr></table></figure><h4 id="1-2-2-2地址定界后跟一个编辑命令"><a href="#1-2-2-2地址定界后跟一个编辑命令" class="headerlink" title="1.2.2.2地址定界后跟一个编辑命令"></a>1.2.2.2地址定界后跟一个编辑命令</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">d <span class="hljs-comment">#删除</span><br>y <span class="hljs-comment">#复制</span><br>w <span class="hljs-built_in">file</span> <span class="hljs-comment">#将范围内的行另存至指定文件中</span><br>r <span class="hljs-built_in">file</span> <span class="hljs-comment">#在指定位置插入指定文件中的所有内容</span><br>t<span class="hljs-comment">#行号 将前面指定的行复制到#行后</span><br>m<span class="hljs-comment">#行号 将前面指定的行移动到#行后</span><br></code></pre></td></tr></table></figure><p>范例：</p><ul><li>删除文件内容第几行到第几行</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">:<span class="hljs-number">1</span>,<span class="hljs-number">3</span>d    <span class="hljs-meta">#删除第一行到第三行</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658925029163.png" srcset="/img/loading.gif" lazyload alt="1658925029163"></p><ul><li>复制文件全部内容</li></ul><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">:.,$y<br><span class="hljs-meta"># 通过键盘上下键选择要复制在什么地方，选择后位置后按p键复制</span><br></code></pre></td></tr></table></figure><ul><li>删除文件全部内容</li></ul><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%d</span><br></code></pre></td></tr></table></figure><h3 id="1-2-3查找和替换"><a href="#1-2-3查找和替换" class="headerlink" title="1.2.3查找和替换"></a>1.2.3查找和替换</h3><p>格式：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">s<span class="hljs-regexp">/查找的内容/</span>替换为内容/修饰符<br></code></pre></td></tr></table></figure><p>说明：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript">要查找的内容：可使用基本正则表达式模式<br>替换为的内容：不能使用模式，但可以使用<span class="hljs-string">\1,</span> <span class="hljs-string">\2,</span> ...等后向引用符号；还可以使用“&amp;”引用前面查找时查<br>找到的整个内容<br></code></pre></td></tr></table></figure><p>修饰符：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">i</span> <span class="hljs-comment">#忽略大小写</span><br>g <span class="hljs-comment">#全局替换，默认情况下，每一行只替换第一次出现</span><br>gc <span class="hljs-comment">#全局替换，每次替换前询问</span><br></code></pre></td></tr></table></figure><p>查找替换中的分隔符&#x2F;可替换为其它字符，如：#,@<br>范例：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">s<span class="hljs-meta">@/etc</span><span class="hljs-meta">@/var</span><span class="hljs-meta">@g</span><br>s<span class="hljs-comment">#/boot#/#i</span><br></code></pre></td></tr></table></figure><ul><li>复制&#x2F;etc&#x2F;passwd到家目录下，将文件内的root全部替换为ROOT</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:%s/root/ROOT/g<br></code></pre></td></tr></table></figure><h3 id="1-2-4定制vim的工作特性"><a href="#1-2-4定制vim的工作特性" class="headerlink" title="1.2.4定制vim的工作特性"></a>1.2.4定制vim的工作特性</h3><p>扩展命令模式的配置只是对当前vim进程有效，可将配置存放在文件中持久保存<br>配置文件：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>vimrc <span class="hljs-comment">#全局</span><br>~/.vimrc <span class="hljs-comment">#个人</span><br></code></pre></td></tr></table></figure><h4 id="1-2-4-1行号"><a href="#1-2-4-1行号" class="headerlink" title="1.2.4.1行号"></a>1.2.4.1行号</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">显示：<span class="hljs-built_in">set</span> number，简写 <span class="hljs-built_in">set</span> nu<br>取消显示：<span class="hljs-built_in">set</span> nonumber, 简写 <span class="hljs-built_in">set</span> nonu<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658926795326.png" srcset="/img/loading.gif" lazyload alt="1658926795326"></p><h4 id="1-2-4-2忽略字符的大小写"><a href="#1-2-4-2忽略字符的大小写" class="headerlink" title="1.2.4.2忽略字符的大小写"></a>1.2.4.2忽略字符的大小写</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> ignorecase，简写 <span class="hljs-built_in">set</span> ic<br>不忽略：<span class="hljs-built_in">set</span> noic<br></code></pre></td></tr></table></figure><h4 id="1-2-4-3自动缩进"><a href="#1-2-4-3自动缩进" class="headerlink" title="1.2.4.3自动缩进"></a>1.2.4.3自动缩进</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> autoindent，简写 <span class="hljs-built_in">set</span> ai<br>禁用：<span class="hljs-built_in">set</span> noai<br></code></pre></td></tr></table></figure><h4 id="1-2-4-4复制保留格式"><a href="#1-2-4-4复制保留格式" class="headerlink" title="1.2.4.4复制保留格式"></a>1.2.4.4复制保留格式</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> paste<br>禁用：<span class="hljs-built_in">set</span> nopaste<br></code></pre></td></tr></table></figure><h4 id="1-2-4-5显示Tab-I和换行符-和-显示"><a href="#1-2-4-5显示Tab-I和换行符-和-显示" class="headerlink" title="1.2.4.5显示Tab ^I和换行符 和$显示"></a>1.2.4.5显示Tab ^I和换行符 和$显示</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> list<br>禁用：<span class="hljs-built_in">set</span> nolist<br></code></pre></td></tr></table></figure><h4 id="1-2-4-6高亮搜索"><a href="#1-2-4-6高亮搜索" class="headerlink" title="1.2.4.6高亮搜索"></a>1.2.4.6高亮搜索</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> hlsearch<br>禁用：<span class="hljs-built_in">set</span> nohlsearch 简写：nohl<br></code></pre></td></tr></table></figure><h4 id="1-2-4-7语法高亮"><a href="#1-2-4-7语法高亮" class="headerlink" title="1.2.4.7语法高亮"></a>1.2.4.7语法高亮</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">启用：<span class="hljs-keyword">syntax</span> <span class="hljs-keyword">on</span><br>禁用：<span class="hljs-keyword">syntax</span> off<br></code></pre></td></tr></table></figure><h4 id="1-2-4-8文件格式"><a href="#1-2-4-8文件格式" class="headerlink" title="1.2.4.8文件格式"></a>1.2.4.8文件格式</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用windows格式：<span class="hljs-built_in">set</span> <span class="hljs-attribute">fileformat</span>=dos<br>启用unix格式：<span class="hljs-built_in">set</span> <span class="hljs-attribute">fileformat</span>=unix<br>简写 <span class="hljs-built_in">set</span> <span class="hljs-attribute">ff</span>=dos|unix<br></code></pre></td></tr></table></figure><h4 id="1-2-4-9Tab-用空格代替"><a href="#1-2-4-9Tab-用空格代替" class="headerlink" title="1.2.4.9Tab 用空格代替"></a>1.2.4.9Tab 用空格代替</h4><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams">启用：<span class="hljs-keyword">set</span> expandtab 默认为<span class="hljs-comment">8</span>个空格代替<span class="hljs-comment">Tab</span><br>禁用：<span class="hljs-keyword">set</span> <span class="hljs-comment">noexpandtab</span><br>简写：<span class="hljs-keyword">set</span> <span class="hljs-comment">et</span><br></code></pre></td></tr></table></figure><h4 id="1-2-4-10Tab用指定空格的个数代替"><a href="#1-2-4-10Tab用指定空格的个数代替" class="headerlink" title="1.2.4.10Tab用指定空格的个数代替"></a>1.2.4.10Tab用指定空格的个数代替</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> <span class="hljs-attribute">tabstop</span>=# 指定#个空格代替Tab<br>简写：<span class="hljs-built_in">set</span> <span class="hljs-attribute">ts</span>=4<br></code></pre></td></tr></table></figure><h4 id="1-2-4-11设置缩进宽度"><a href="#1-2-4-11设置缩进宽度" class="headerlink" title="1.2.4.11设置缩进宽度"></a>1.2.4.11设置缩进宽度</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#向右缩进 命令模式&gt;&gt;</span><br><span class="hljs-comment">#向左缩进 命令模式&lt;&lt;</span><br><span class="hljs-comment">#设置缩进为4个字符</span><br><span class="hljs-built_in">set</span> <span class="hljs-attribute">shiftwidth</span>=4<br></code></pre></td></tr></table></figure><h4 id="1-2-4-12设置文本宽度"><a href="#1-2-4-12设置文本宽度" class="headerlink" title="1.2.4.12设置文本宽度"></a>1.2.4.12设置文本宽度</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-attribute">textwidth</span>=65 (vim only) #从左向右计数<br><span class="hljs-built_in">set</span> <span class="hljs-attribute">wrapmargin</span>=15 #从右到左计数<br></code></pre></td></tr></table></figure><h4 id="1-2-4-13-设置光标所在行的标识线"><a href="#1-2-4-13-设置光标所在行的标识线" class="headerlink" title="1.2.4.13 设置光标所在行的标识线"></a>1.2.4.13 设置光标所在行的标识线</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用：<span class="hljs-built_in">set</span> cursorline，简写 <span class="hljs-built_in">set</span> cul<br>禁用：<span class="hljs-built_in">set</span> nocursorline<br></code></pre></td></tr></table></figure><h4 id="1-2-4-14加密"><a href="#1-2-4-14加密" class="headerlink" title="1.2.4.14加密"></a>1.2.4.14加密</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">启用： <span class="hljs-built_in">set</span> <span class="hljs-attribute">key</span>=password<br>禁用： <span class="hljs-built_in">set</span> key=<br></code></pre></td></tr></table></figure><h4 id="1-2-4-15了解更多"><a href="#1-2-4-15了解更多" class="headerlink" title="1.2.4.15了解更多"></a>1.2.4.15了解更多</h4><p>set帮助</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">:help option-list<br><span class="hljs-meta">:set or :set</span> all<br></code></pre></td></tr></table></figure><h2 id="1-3命令模式"><a href="#1-3命令模式" class="headerlink" title="1.3命令模式"></a>1.3命令模式</h2><h3 id="1-3-1退出vim"><a href="#1-3-1退出vim" class="headerlink" title="1.3.1退出vim"></a>1.3.1退出vim</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ZZ</span> 保存退出<br>ZQ	不保存退出<br></code></pre></td></tr></table></figure><h3 id="1-3-2光标跳转"><a href="#1-3-2光标跳转" class="headerlink" title="1.3.2光标跳转"></a>1.3.2光标跳转</h3><ul><li>字符间跳转</li></ul><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">h:</span> 左<br><span class="hljs-symbol">l:</span> 右<br><span class="hljs-symbol">j:</span> 下<br><span class="hljs-symbol">k:</span> 上<br><span class="hljs-meta">#COMMAND：跳转由#指定的个数的字符	如：3l</span><br></code></pre></td></tr></table></figure><ul><li>单词间跳转</li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean">w：下一个单词的词首<br>e：当前或下一单词的词尾<br>b：当前或前一个单词的词首<br>#COMMAND：由#指定一次跳转的单词数<br></code></pre></td></tr></table></figure><ul><li>当前页跳转</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">H</span>：页首<br>M：页中间行<br>L：页底<br>zt：将光标所在当前行移到屏幕顶端<br>zz：将光标所在当前行移到屏幕中间<br>zb：将光标所在当前行移到屏幕底端<br></code></pre></td></tr></table></figure><ul><li>行首行尾</li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crystal">^ 跳转至行首的第一个非空白字符<br><span class="hljs-number">0</span> 跳转至行首<br><span class="hljs-variable">$ </span>跳转至行尾<br></code></pre></td></tr></table></figure><ul><li>行间移动</li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean">#G 或者扩展命令模式下<br>:# 跳转至由第#行<br>G 最后一行<br><span class="hljs-number">1</span>G, gg 第一行<br></code></pre></td></tr></table></figure><ul><li>句间移动</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">) 下一句<br>( 上一句<br></code></pre></td></tr></table></figure><ul><li>段落间移动</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">&#125; 下一段<br>&#123; 上一段<br></code></pre></td></tr></table></figure><ul><li>命令模式翻屏操作</li></ul><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">Ctrl</span>+f 向文件尾部翻一屏,相当于Pagedown<br><span class="hljs-symbol">Ctrl</span>+<span class="hljs-keyword">b</span> 向文件首部翻一屏,相当于Pageup<br><span class="hljs-symbol">Ctrl</span>+d 向文件尾部翻半屏<br><span class="hljs-symbol">Ctrl</span>+u 向文件首部翻半屏<br></code></pre></td></tr></table></figure><h3 id="1-3-3字符编辑"><a href="#1-3-3字符编辑" class="headerlink" title="1.3.3字符编辑"></a>1.3.3字符编辑</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">x</span> 剪切光标处的字符	<span class="hljs-comment"># p键可复制剪切的字符</span><br><span class="hljs-comment">#x 剪切光标处起始的#个字符</span><br>xp 交换光标所在处的字符及其后面字符的位置<br><span class="hljs-regexp">~ 转换大小写</span><br>J 删除当前行后的换行符<br></code></pre></td></tr></table></figure><h3 id="1-3-4替换"><a href="#1-3-4替换" class="headerlink" title="1.3.4替换"></a>1.3.4替换</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">r 只替换光标所在处的一个字符<br>R 切换成<span class="hljs-built_in">REPLACE</span>模式（在末行出现-- <span class="hljs-built_in">REPLACE</span> -- 提示）,按ESC回到命令模式<br></code></pre></td></tr></table></figure><h3 id="1-3-5删除命令"><a href="#1-3-5删除命令" class="headerlink" title="1.3.5删除命令"></a>1.3.5删除命令</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs powershell">d 删除命令，可结合光标跳转字符，实现范围删除<br>d<span class="hljs-variable">$</span> 删除到行尾<br>d^ 删除到非空行首<br>d0 删除到行首<br>dw<br>de<br>db<br><span class="hljs-comment">#COMMAND</span><br>dd： 剪切光标所在的行<br><span class="hljs-comment">#dd 多行删除</span><br>D：从当前光标位置一直删除到行尾，等同于d<span class="hljs-variable">$</span><br></code></pre></td></tr></table></figure><h3 id="1-3-6复制命令"><a href="#1-3-6复制命令" class="headerlink" title="1.3.6复制命令"></a>1.3.6复制命令</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crystal">y 复制，行为相似于d命令<br>y<span class="hljs-variable">$</span><br><span class="hljs-variable"></span>y0<br>y^<br>ye<br>yw<br>yb<br><span class="hljs-comment">#COMMAND</span><br>yy：复制行<br><span class="hljs-comment">#yy 复制多行</span><br>Y：复制整行<br></code></pre></td></tr></table></figure><h3 id="1-3-7粘贴命令"><a href="#1-3-7粘贴命令" class="headerlink" title="1.3.7粘贴命令"></a>1.3.7粘贴命令</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> 缓冲区存的如果为整行，则粘贴当前光标所在行的下方；否则，则粘贴至当前光标所在处的后面<br><span class="hljs-selector-tag">P</span> 缓冲区存的如果为整行，则粘贴当前光标所在行的上方；否则，则粘贴至当前光标所在处的前面<br></code></pre></td></tr></table></figure><h3 id="1-3-8查找"><a href="#1-3-8查找" class="headerlink" title="1.3.8查找"></a>1.3.8查找</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">/PATTERN：从当前光标所在处向文件尾部查找<br>?PATTERN：从当前光标所在处向文件首部查找<br><span class="hljs-built_in">n</span>：与命令同方向<br><span class="hljs-built_in">N</span>：与命令反方向<br></code></pre></td></tr></table></figure><h4 id="1-3-9撤销更改"><a href="#1-3-9撤销更改" class="headerlink" title="1.3.9撤销更改"></a>1.3.9撤销更改</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs clean">u 撤销最近的更改，相当于windows中ctrl+z<br>#u 撤销之前多次更改<br>U 撤消光标落在这行后所有此行的更改<br>Ctrl-r 重做最后的“撤消”更改，相当于windows中crtl+y<br>. 重复前一个操作<br>#. 重复前一个操作#次<br></code></pre></td></tr></table></figure><h4 id="1-3-10高级用法"><a href="#1-3-10高级用法" class="headerlink" title="1.3.10高级用法"></a>1.3.10高级用法</h4><p>常见Command：y 复制、d 删除、gU 变大写、gu 变小写<br>范例：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-number">0</span>y<span class="hljs-variable">$ </span>命令<br><span class="hljs-number">0</span> → 先到行头<br>y → 从这里开始拷贝<br><span class="hljs-variable">$ </span>→ 拷贝到本行最后一个字符<br></code></pre></td></tr></table></figure><p>范例：粘贴“wang”100次</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">100iwang</span><span class="hljs-meta"> [ESC]</span><br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">di&quot; 光标在” “之间，则删除” “之间的内容<br><span class="hljs-built_in">yi</span>( 光标在()之间，则复制()之间的内容<br>vi<span class="hljs-selector-attr">[ 光标在[]</span>之间，则选中<span class="hljs-selector-attr">[]</span>之间的内容<br>dtx 删除字符直到遇见光标之后的第一个 x 字符<br>ytx 复制字符直到遇见光标之后的第一个 x 字符<br></code></pre></td></tr></table></figure><h2 id="1-4可视化模式"><a href="#1-4可视化模式" class="headerlink" title="1.4可视化模式"></a>1.4可视化模式</h2><p>在末行有”– VISUAL – “指示，表示在可视化模式<br>允许选择的文本块</p><ul><li>v 面向字符，– VISUAL –</li><li>V 面向整行，– VISUAL LINE –</li><li>ctrl-v 面向块，– VISUAL BLOCK –<br>可视化键可用于与移动键结合使用<br>w ) } 箭头等<br>突出显示的文字可被删除，复制，变更，过滤，搜索，替换等<br>范例：在文件指定行的行首插入#</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-number">1</span>、先将光标移动到指定的第一行的行首<br><span class="hljs-number">2</span>、输入ctrl+v 进入可视化模式<br><span class="hljs-number">3</span>、向下移动光标，选中希望操作的每一行的第一个字符<br><span class="hljs-number">4</span>、输入大写字母 I 切换至插入模式<br><span class="hljs-number">5</span>、输入 <span class="hljs-meta">#</span><br><span class="hljs-number">6</span>、按 ESC 键<br></code></pre></td></tr></table></figure><p>范例：在指定的块位置插入相同的内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-number">1</span>、光标定位到要操作的地方<br><span class="hljs-number">2</span>、CTRL+v 进入“可视块”模式，选取这一列操作多少行<br><span class="hljs-number">3</span>、SHIFT+<span class="hljs-selector-tag">i</span>(<span class="hljs-selector-tag">I</span>)<br><span class="hljs-number">4</span>、输入要插入的内容<br><span class="hljs-number">5</span>、按 ESC 键<br></code></pre></td></tr></table></figure><h2 id="1-5多文件模式"><a href="#1-5多文件模式" class="headerlink" title="1.5多文件模式"></a>1.5多文件模式</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> FILE1 FILE2 FILE3 ...<br>:<span class="hljs-keyword">next</span> 下一个<br>:<span class="hljs-keyword">prev</span> 前一个<br>:<span class="hljs-keyword">first</span> 第一个<br>:<span class="hljs-keyword">last</span> 最后一个<br>:<span class="hljs-keyword">wall</span> 保存所有<br>:<span class="hljs-keyword">qall</span> 不保存退出所有<br>:<span class="hljs-keyword">wqall</span>保存退出所有<br></code></pre></td></tr></table></figure><h2 id="1-6多窗口模式"><a href="#1-6多窗口模式" class="headerlink" title="1.6多窗口模式"></a>1.6多窗口模式</h2><h3 id="1-6-1多文件分割"><a href="#1-6-1多文件分割" class="headerlink" title="1.6.1多文件分割"></a>1.6.1多文件分割</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">vim</span> <span class="hljs-operator">-</span><span class="hljs-variable">o</span><span class="hljs-operator">|-</span><span class="hljs-built_in">O</span> <span class="hljs-variable">FILE1</span> <span class="hljs-variable">FILE2</span> <span class="hljs-operator">...</span><br><span class="hljs-operator">-</span><span class="hljs-variable">o</span><span class="hljs-operator">:</span> 水平或上下分割<br><span class="hljs-operator">-</span><span class="hljs-built_in">O</span><span class="hljs-operator">:</span> 垂直或左右分割（<span class="hljs-variable">vim</span> <span class="hljs-variable">only</span>）<br>在窗口间切换：<span class="hljs-variable">Ctrl</span><span class="hljs-operator">+</span><span class="hljs-variable">w</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Arrow</span><br></code></pre></td></tr></table></figure><h3 id="1-6-2单文件窗口"><a href="#1-6-2单文件窗口" class="headerlink" title="1.6.2单文件窗口"></a>1.6.2单文件窗口</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim">Ctrl+<span class="hljs-keyword">w</span>,s：<span class="hljs-keyword">split</span>, 水平分割，上下分屏<br>Ctrl+<span class="hljs-keyword">w</span>,v：<span class="hljs-keyword">vertical</span>, 垂直分割，左右分屏<br>ctrl+<span class="hljs-keyword">w</span>,q：取消相邻窗口<br>ctrl+<span class="hljs-keyword">w</span>,<span class="hljs-keyword">o</span>：取消全部窗口<br>:<span class="hljs-keyword">wqall</span> 退出<br></code></pre></td></tr></table></figure><h2 id="1-7帮助"><a href="#1-7帮助" class="headerlink" title="1.7帮助"></a>1.7帮助</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">:help<br>:help topic<br>Use :q to <span class="hljs-keyword">exit</span> help<br><span class="hljs-comment">#vimtutor</span><br></code></pre></td></tr></table></figure><h1 id="2-常见文本处理工具"><a href="#2-常见文本处理工具" class="headerlink" title="2.常见文本处理工具"></a>2.常见文本处理工具</h1><h2 id="2-1文件内容查看命令"><a href="#2-1文件内容查看命令" class="headerlink" title="2.1文件内容查看命令"></a>2.1文件内容查看命令</h2><h3 id="2-1-1查看文本文件内容"><a href="#2-1-1查看文本文件内容" class="headerlink" title="2.1.1查看文本文件内容"></a>2.1.1查看文本文件内容</h3><h4 id="2-1-1-1-cat"><a href="#2-1-1-1-cat" class="headerlink" title="2.1.1.1 cat"></a>2.1.1.1 cat</h4><p>cat可以查看文本内容</p><p>格式：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">cat [<span class="hljs-symbol">OPTION</span>]... [<span class="hljs-symbol">FILE</span>]...<br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-E：显示行结束符$</span><br><span class="hljs-deletion">-A：显示所有控制符</span><br><span class="hljs-deletion">-n：对显示出的每一行进行编号</span><br><span class="hljs-deletion">-b：非空行编号</span><br><span class="hljs-deletion">-s：压缩连续的空行成一行</span><br></code></pre></td></tr></table></figure><h4 id="2-1-1-2-nl"><a href="#2-1-1-2-nl" class="headerlink" title="2.1.1.2 nl"></a>2.1.1.2 nl</h4><p>显示行号，相当于cat -b</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># nl data.txt </span><br>     <span class="hljs-number">1</span>	<span class="hljs-number">1</span><br>     <span class="hljs-number">2</span>	<span class="hljs-number">2</span><br>     <span class="hljs-number">3</span>	<span class="hljs-number">3</span><br>     <span class="hljs-number">4</span>	<span class="hljs-number">4</span><br>     <span class="hljs-number">5</span>	<span class="hljs-number">5</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><h4 id="2-1-1-3-tac"><a href="#2-1-1-3-tac" class="headerlink" title="2.1.1.3 tac"></a>2.1.1.3 tac</h4><p>逆向显示文本内容</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># cat data.txt </span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># tac data.txt </span><br><span class="hljs-number">5</span><br><span class="hljs-number">4</span><br><span class="hljs-number">3</span><br><span class="hljs-number">2</span><br><span class="hljs-number">1</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># </span><br><br></code></pre></td></tr></table></figure><h4 id="2-1-1-4-rev"><a href="#2-1-1-4-rev" class="headerlink" title="2.1.1.4 rev"></a>2.1.1.4 rev</h4><p>将同一行的内容逆向显示</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@rocky8 ~]</span># cat readme<span class="hljs-selector-class">.txt</span> <br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span><br><span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">b</span> c d e f<br><span class="hljs-selector-attr">[root@rocky8 ~]</span># rev readme<span class="hljs-selector-class">.txt</span> <br><span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span><br>f e d c <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">a</span><br><span class="hljs-selector-attr">[root@rocky8 ~]</span>#<br></code></pre></td></tr></table></figure><h3 id="2-1-2查看非文本文件内容"><a href="#2-1-2查看非文本文件内容" class="headerlink" title="2.1.2查看非文本文件内容"></a>2.1.2查看非文本文件内容</h3><p>范例：hexdump</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">hexdump</span> -C -n <span class="hljs-number">512</span> /dev/sda<br><span class="hljs-attribute">00000000</span> eb <span class="hljs-number">63</span> <span class="hljs-number">90</span> <span class="hljs-number">10</span> <span class="hljs-number">8</span>e d0 bc <span class="hljs-number">00</span> b0 b8 <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">8</span>e d8 <span class="hljs-number">8</span>e c0 |.c..............|<br><span class="hljs-attribute">echo</span> &#123;a..z&#125; | tr -d &#x27; &#x27;|hexdump -C<br><span class="hljs-attribute">00000000</span> <span class="hljs-number">61</span> <span class="hljs-number">62</span> <span class="hljs-number">63</span> <span class="hljs-number">64</span> <span class="hljs-number">65</span> <span class="hljs-number">66</span> <span class="hljs-number">67</span> <span class="hljs-number">68</span> <span class="hljs-number">69</span> <span class="hljs-number">6</span>a <span class="hljs-number">6</span>b <span class="hljs-number">6</span>c <span class="hljs-number">6</span>d <span class="hljs-number">6</span>e <span class="hljs-number">6</span>f <span class="hljs-number">70</span> |abcdefghijklmnop|<br><span class="hljs-attribute">00000010</span> <span class="hljs-number">71</span> <span class="hljs-number">72</span> <span class="hljs-number">73</span> <span class="hljs-number">74</span> <span class="hljs-number">75</span> <span class="hljs-number">76</span> <span class="hljs-number">77</span> <span class="hljs-number">78</span> <span class="hljs-number">79</span> <span class="hljs-number">7</span>a <span class="hljs-number">0</span>a |qrstuvwxyz.|<br><span class="hljs-attribute">0000001b</span><br></code></pre></td></tr></table></figure><h2 id="2-2-分页查看文件内容"><a href="#2-2-分页查看文件内容" class="headerlink" title="2.2. 分页查看文件内容"></a>2.2. 分页查看文件内容</h2><h3 id="2-2-1-more"><a href="#2-2-1-more" class="headerlink" title="2.2.1 more"></a>2.2.1 more</h3><p>可以实现分页查看文件，可以配合管道符实现输出信息的分页</p><p>格式：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">more [<span class="hljs-keyword">OPTIONS</span>...] <span class="hljs-keyword">FILE</span>...<br></code></pre></td></tr></table></figure><p>选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-d: 显示翻页及退出提示</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">more</span> passwd<br></code></pre></td></tr></table></figure><p>使用空格键往下查看，可显示进度百分比，“q”退出</p><h3 id="2-2-2-less"><a href="#2-2-2-less" class="headerlink" title="2.2.2 less"></a>2.2.2 less</h3><p>less 也可以实现分页查看文件或STDIN输出，less 命令是man命令使用的分页器<br>查看时有用的命令包括：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">/文本 搜索 文本<br><span class="hljs-built_in">n</span>/<span class="hljs-built_in">N</span> 跳到下一个 或 上一个匹配<br></code></pre></td></tr></table></figure><p>范例：#less 配合管道对其它命令的执行结果进行分页显示</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">cat passwd <span class="hljs-string">|less</span><br></code></pre></td></tr></table></figure><h2 id="2-3显示文本前面的或后面的内容"><a href="#2-3显示文本前面的或后面的内容" class="headerlink" title="2.3显示文本前面的或后面的内容"></a>2.3显示文本前面的或后面的内容</h2><h3 id="2-3-1-head"><a href="#2-3-1-head" class="headerlink" title="2.3.1 head"></a>2.3.1 head</h3><p>可以显示文件或标准输入的前面行<br>格式：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">head [<span class="hljs-symbol">OPTION</span>]... [<span class="hljs-symbol">FILE</span>]...<br></code></pre></td></tr></table></figure><p>选项：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">-c # 指定获取前#字节<br>-n # 指定获取前#行,#如果为负数,表示从文件头取到倒数第#前<br>-# 同上<br></code></pre></td></tr></table></figure><p>范例：查看passwd文件前三行</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-comment"># head -n 3 passwd </span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br>[root<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>范例：查看倒数三行</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-comment"># head -3 passwd </span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br>[root<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>范例：查看首行到倒数第三行内容</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">head</span> -n -<span class="hljs-number">3</span> passwd<br></code></pre></td></tr></table></figure><h3 id="2-3-2-tail"><a href="#2-3-2-tail" class="headerlink" title="2.3.2 tail"></a>2.3.2 tail</h3><p>tail 和head 相反，查看文件或标准输入的倒数行<br>格式:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">tail [<span class="hljs-symbol">OPTION</span>]... [<span class="hljs-symbol">FILE</span>]...<br></code></pre></td></tr></table></figure><p>常用选项：</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>c <span class="hljs-comment"># 指定获取后#字节</span><br><span class="hljs-literal">-</span>n <span class="hljs-comment"># 指定获取后#行,如果#是负数,表示从第#行开始到文件结束</span><br><span class="hljs-literal">-</span><span class="hljs-comment"># 同上</span><br><span class="hljs-literal">-</span>f 跟踪显示文件fd新追加的内容,常用日志监控，相当于 --follow=descriptor,当文件删除再新<br>建同名文件,将无法继续跟踪文件<br><span class="hljs-literal">-</span>F 跟踪文件名，相当于--follow=name --retry，当文件删除再新建同名文件,将可以继续跟踪文<br>件<br>tailf 类似 tail –f，当文件不增长时并不访问文件,节约资源,CentOS8已经无此工具<br></code></pre></td></tr></table></figure><h2 id="2-4按列抽取文本-cut"><a href="#2-4按列抽取文本-cut" class="headerlink" title="2.4按列抽取文本 cut"></a>2.4按列抽取文本 cut</h2><p>cut 命令可以提取文本文件或STDIN数据的指定列<br>格式:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs \">cut [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure><p>常用选项</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean">-d DELIMITER: 指明分隔符，默认tab<br>-f FILEDS:<br>#: 第#个字段,例如:<span class="hljs-number">3</span><br>#,#[,#]：离散的多个字段，例如:<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span><br>#-#：连续的多个字段, 例如:<span class="hljs-number">1</span><span class="hljs-number">-6</span><br>混合使用：<span class="hljs-number">1</span><span class="hljs-number">-3</span>,<span class="hljs-number">7</span><br>-c 按字符切割<br>--output-delimiter=STRING指定输出分隔符<br></code></pre></td></tr></table></figure><h2 id="2-5合并多个文件-paste"><a href="#2-5合并多个文件-paste" class="headerlink" title="2.5合并多个文件 paste"></a>2.5合并多个文件 paste</h2><p>paste 合并多个文件同行号的列到一行<br>格式</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">paste [<span class="hljs-symbol">OPTION</span>]... [<span class="hljs-symbol">FILE</span>]...<br></code></pre></td></tr></table></figure><p>常用选项：</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>d <span class="hljs-comment">#分隔符：指定分隔符，默认用TAB</span><br><span class="hljs-literal">-</span>s <span class="hljs-comment">#所有行合成一行显示</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># echo &#123;a..d&#125;&gt;alpha.log</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># cat alpha.log </span><br>a b c d<br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># echo &#123;1..4&#125;&gt;seq.log</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># cat seq.log </span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># paste alpha.log seq.log </span><br>a b c d	<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br>[root<span class="hljs-symbol">@rocky8</span> ~]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@rocky8 ~]# <span class="hljs-keyword">cat</span> alpha.<span class="hljs-built_in">log</span> <br><span class="hljs-keyword">a</span><br><span class="hljs-keyword">b</span><br><span class="hljs-keyword">c</span><br>d<br>[root@rocky8 ~]# <span class="hljs-keyword">echo</span> &#123;<span class="hljs-number">1</span>..<span class="hljs-number">4</span>&#125; |<span class="hljs-keyword">tr</span> <span class="hljs-string">&quot; &quot;</span> <span class="hljs-string">&quot;\n&quot;</span>&gt;seq.<span class="hljs-built_in">log</span><br>[root@rocky8 ~]# <span class="hljs-keyword">cat</span> seq.<span class="hljs-built_in">log</span> <br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br>[root@rocky8 ~]# paste -d: alpha.<span class="hljs-built_in">log</span> seq.<span class="hljs-built_in">log</span> <br><span class="hljs-variable">a:1</span><br><span class="hljs-variable">b:2</span><br><span class="hljs-keyword">c</span>:<span class="hljs-number">3</span><br>d:<span class="hljs-number">4</span><br>[root@rocky8 ~]# <br></code></pre></td></tr></table></figure><h2 id="2-6分析文本的工具"><a href="#2-6分析文本的工具" class="headerlink" title="2.6分析文本的工具"></a>2.6分析文本的工具</h2><p>文本数据统计：wc<br>整理文本：sort<br>比较文件：diff和patch</p><h3 id="2-6-1-收集文本统计数据-wc"><a href="#2-6-1-收集文本统计数据-wc" class="headerlink" title="2.6.1 收集文本统计数据 wc"></a>2.6.1 收集文本统计数据 wc</h3><p>wc 命令可用于统计文件的行总数、单词总数、字节总数和字符总数<br>可以对文件或STDIN中的数据统计<br>常用选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-l 只计数行数</span><br><span class="hljs-deletion">-w 只计数单词总数</span><br><span class="hljs-deletion">-c 只计数字节总数</span><br><span class="hljs-deletion">-m 只计数字符总数</span><br><span class="hljs-deletion">-L 显示文件中最长行的长度</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@rocky8 ~]# wc <span class="hljs-regexp">/etc/</span>passwd<br>  <span class="hljs-number">30</span>   <span class="hljs-number">58</span> <span class="hljs-number">1511</span> <span class="hljs-regexp">/etc/</span>passwd<br>  行数  单词数  字节数<br>  <br> [root@rocky8 ~]# wc -l <span class="hljs-regexp">/etc/</span>passwd<br><span class="hljs-number">30</span> <span class="hljs-regexp">/etc/</span>passwd<br>[root@rocky8 ~]# wc -w <span class="hljs-regexp">/etc/</span>passwd<br><span class="hljs-number">58</span> <span class="hljs-regexp">/etc/</span>passwd<br>[root@rocky8 ~]# wc -c <span class="hljs-regexp">/etc/</span>passwd<br><span class="hljs-number">1511</span> <span class="hljs-regexp">/etc/</span>passwd<br>[root@rocky8 ~]# wc -m <span class="hljs-regexp">/etc/</span>passwd<br><span class="hljs-number">1511</span> <span class="hljs-regexp">/etc/</span>passwd<br>[root@rocky8 ~]# wc -L <span class="hljs-regexp">/etc/</span>passwd<br><span class="hljs-number">85</span> <span class="hljs-regexp">/etc/</span>passwd<br>[root@rocky8 ~]# <br></code></pre></td></tr></table></figure><h3 id="2-6-2-文本排序-sort"><a href="#2-6-2-文本排序-sort" class="headerlink" title="2.6.2 文本排序 sort"></a>2.6.2 文本排序 sort</h3><p>把整理过的文本显示在STDOUT，不改变原始文件<br>格式：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">sort</span> [<span class="hljs-keyword">options</span>] <span class="hljs-keyword">file</span>(s)<br></code></pre></td></tr></table></figure><p>常用选项:</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>r 执行反方向（由上至下）整理<br><span class="hljs-literal">-</span>R 随机排序<br><span class="hljs-literal">-</span>n 执行按数字大小整理<br><span class="hljs-literal">-</span>h 人类可读排序,如: 2K 1G<br><span class="hljs-literal">-</span>f 选项忽略（fold）字符串中的字符大小写<br><span class="hljs-literal">-</span>u 选项（独特，unique），合并重复项，即去重<br><span class="hljs-literal">-</span>t c 选项使用c做为字段界定符<br><span class="hljs-literal">-</span>k <span class="hljs-comment"># 选项按照使用c字符分隔的 # 列来整理能够使用多次</span><br></code></pre></td></tr></table></figure><p>范例:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#统计日志访问量<br>[root@centos8 data]#cut -d<span class="hljs-string">&quot; &quot;</span> -f1 <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>access_log |<span class="hljs-keyword">sort</span> -u|wc -l<br><span class="hljs-number">201</span><br></code></pre></td></tr></table></figure><p>范例：统计分区利用率</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span>| <span class="hljs-built_in">tr</span> -s <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-string">&#x27;%&#x27;</span>|<span class="hljs-built_in">cut</span> -d% -f5|<span class="hljs-built_in">sort</span> -nr|<span class="hljs-built_in">head</span> -n1<br></code></pre></td></tr></table></figure><h3 id="2-6-3-去重"><a href="#2-6-3-去重" class="headerlink" title="2.6.3 去重"></a>2.6.3 去重</h3><p>uniq命令从输入中删除前后相接的重复的行<br>格式：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">uni<span class="hljs-string">q [OPTION]</span>... [FILE]...<br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-c: 显示每行重复出现的次数</span><br><span class="hljs-deletion">-d: 仅显示重复过的行</span><br><span class="hljs-deletion">-u: 仅显示不曾重复的行</span><br></code></pre></td></tr></table></figure><p>uniq常和sort 命令一起配合使用：<br>范例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sort</span> userlist.txt | <span class="hljs-built_in">uniq</span> -c<br></code></pre></td></tr></table></figure><p>范例：统计日志访问量最多的请求</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coq">[root@centos8 data]#<span class="hljs-built_in">cut</span> -d<span class="hljs-string">&quot; &quot;</span> -f1 access_log |<span class="hljs-type">sort</span> |<span class="hljs-type">uniq</span> -c|<span class="hljs-type">sort</span> -nr |<span class="hljs-type">head</span> <span class="hljs-number">-3</span><br><span class="hljs-number">4870</span> <span class="hljs-number">172.20</span><span class="hljs-number">.116</span><span class="hljs-number">.228</span><br><span class="hljs-number">3429</span> <span class="hljs-number">172.20</span><span class="hljs-number">.116</span><span class="hljs-number">.208</span><br><span class="hljs-number">2834</span> <span class="hljs-number">172.20</span><span class="hljs-number">.0</span><span class="hljs-number">.222</span><br>[root@centos8 data]#lastb -f btmp<span class="hljs-number">-34</span> | <span class="hljs-type">tr</span> -s &#x27; &#x27; |<span class="hljs-type">cut</span> -d &#x27; &#x27; -f3|<span class="hljs-type">sort</span> |<span class="hljs-type">uniq</span> -c<br>|<span class="hljs-type">sort</span> -nr | <span class="hljs-type">head</span> <span class="hljs-number">-3</span><br><span class="hljs-number">86294</span> <span class="hljs-number">58.218</span><span class="hljs-number">.92</span><span class="hljs-number">.37</span><br><span class="hljs-number">43148</span> <span class="hljs-number">58.218</span><span class="hljs-number">.92</span><span class="hljs-number">.26</span><br><span class="hljs-number">18036</span> <span class="hljs-number">112.85</span><span class="hljs-number">.42</span><span class="hljs-number">.201</span><br></code></pre></td></tr></table></figure><p>范例：并发连接最多的远程主机IP</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coq">[root@centos8 ~]#ss -nt|<span class="hljs-type">tail</span> -n+<span class="hljs-number">2</span> |<span class="hljs-type">tr</span> -s &#x27; &#x27; : |<span class="hljs-type">cut</span> -d: -f6|<span class="hljs-type">sort</span>|<span class="hljs-type">uniq</span> -c|<span class="hljs-type">sort</span> -<br>nr |<span class="hljs-type">head</span> -n2<br><span class="hljs-number">7</span> <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><span class="hljs-number">2</span> <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.7</span><br></code></pre></td></tr></table></figure><p>范例：取两个文件的相同和不同的行</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@centos8 data]</span><span class="hljs-selector-id">#cat</span> <span class="hljs-selector-tag">test1</span><span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-tag">a</span><br><span class="hljs-selector-tag">b</span><br><span class="hljs-number">1</span><br><span class="hljs-selector-tag">c</span><br><span class="hljs-selector-attr">[root@centos8 data]</span><span class="hljs-selector-id">#cat</span> <span class="hljs-selector-tag">test2</span><span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-tag">b</span><br><span class="hljs-selector-tag">e</span><br><span class="hljs-selector-tag">f</span><br><span class="hljs-selector-tag">c</span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br>#取文件的共同行<br><span class="hljs-selector-attr">[root@centos8 data]</span><span class="hljs-selector-id">#cat</span> <span class="hljs-selector-tag">test1</span><span class="hljs-selector-class">.txt</span> <span class="hljs-selector-tag">test2</span><span class="hljs-selector-class">.txt</span> | <span class="hljs-selector-tag">sort</span> |<span class="hljs-selector-tag">uniq</span> <span class="hljs-selector-tag">-d</span><br><span class="hljs-number">1</span><br><span class="hljs-selector-tag">b</span><br><span class="hljs-selector-tag">c</span><br>#取文件的不同行<br><span class="hljs-selector-attr">[root@centos8 data]</span><span class="hljs-selector-id">#cat</span> <span class="hljs-selector-tag">test1</span><span class="hljs-selector-class">.txt</span> <span class="hljs-selector-tag">test2</span><span class="hljs-selector-class">.txt</span> | <span class="hljs-selector-tag">sort</span> |<span class="hljs-selector-tag">uniq</span> <span class="hljs-selector-tag">-u</span><br><span class="hljs-number">2</span><br><span class="hljs-selector-tag">a</span><br><span class="hljs-selector-tag">e</span><br><span class="hljs-selector-tag">f</span><br></code></pre></td></tr></table></figure><h3 id="2-6-4-比较文件"><a href="#2-6-4-比较文件" class="headerlink" title="2.6.4 比较文件"></a>2.6.4 比较文件</h3><h4 id="2-6-4-1-diff"><a href="#2-6-4-1-diff" class="headerlink" title="2.6.4.1 diff"></a>2.6.4.1 diff</h4><p>diff命令比较两个文件之间的区别</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">-u 选项来输出<span class="hljs-string">&quot;统一的(unified)&quot;</span><span class="hljs-built_in">diff</span>格式文件，最适用于补丁文件<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@rocky8</span> <span class="hljs-string">data</span>]<span class="hljs-comment"># cat a.txt </span><br><span class="hljs-string">a</span><br><span class="hljs-string">b</span><br><span class="hljs-string">c</span><br><span class="hljs-string">d</span><br>[<span class="hljs-string">root@rocky8</span> <span class="hljs-string">data</span>]<span class="hljs-comment"># cat b.txt </span><br><span class="hljs-string">a</span><br><span class="hljs-number">2</span><br><span class="hljs-string">c</span><br><span class="hljs-string">d</span><br>[<span class="hljs-string">root@rocky8</span> <span class="hljs-string">data</span>]<span class="hljs-comment"># diff a.txt b.txt </span><br><span class="hljs-string">2c2</span><br><span class="hljs-string">&lt;</span> <span class="hljs-string">b</span><br><span class="hljs-meta">---</span><br><span class="hljs-string">&gt;</span> <span class="hljs-number">2</span><br>[<span class="hljs-string">root@rocky8</span> <span class="hljs-string">data</span>]<span class="hljs-comment"># </span><br><br></code></pre></td></tr></table></figure><h4 id="2-6-4-2-patch"><a href="#2-6-4-2-patch" class="headerlink" title="2.6.4.2 patch"></a>2.6.4.2 patch</h4><p><strong>patch 复制在其它文件中进行的改变（要谨慎使用）</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">-<span class="hljs-keyword">b</span> 选项来自动备份改变了的文件<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">diff -u foo<span class="hljs-selector-class">.conf</span> foo2<span class="hljs-selector-class">.conf</span> &gt; foo<span class="hljs-selector-class">.patch</span><br>patch -<span class="hljs-selector-tag">b</span> foo<span class="hljs-selector-class">.conf</span> foo.patch<br></code></pre></td></tr></table></figure><h4 id="2-6-4-3vimdiff"><a href="#2-6-4-3vimdiff" class="headerlink" title="2.6.4.3vimdiff"></a>2.6.4.3vimdiff</h4><p>相当于 vim -d</p><p>范例：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@rocky8 data]</span># cat <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-tag">a</span><br><span class="hljs-number">2</span><br>c<br>d<br><span class="hljs-selector-attr">[root@rocky8 data]</span># cat <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.txt</span> <br><span class="hljs-selector-tag">a</span><br><span class="hljs-number">2</span><br>c<br>d<br><span class="hljs-selector-attr">[root@rocky8 data]</span># vimdiff <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span> <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.txt</span> <br><span class="hljs-number">2</span> files <span class="hljs-selector-tag">to</span> edit<br><span class="hljs-selector-attr">[root@rocky8 data]</span># <br><br></code></pre></td></tr></table></figure><h4 id="2-6-4-3cmp"><a href="#2-6-4-3cmp" class="headerlink" title="2.6.4.3cmp"></a>2.6.4.3cmp</h4><p>范例：查看二进制文件的不同</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@centos8 data]#ll <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dir /u</span>sr<span class="hljs-regexp">/bin/</span>ls<br>-rwxr-xr-x. <span class="hljs-number">1</span> root root <span class="hljs-number">166448</span> May <span class="hljs-number">12</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin/dir<br>-rwxr-xr-x. <span class="hljs-number">1</span> root root <span class="hljs-number">166448</span> May <span class="hljs-number">12</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin/ls<br>[root@centos8 data]#ll <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dir /u</span>sr<span class="hljs-regexp">/bin/</span>ls -i<br><span class="hljs-number">201839444</span> -rwxr-xr-x. <span class="hljs-number">1</span> root root <span class="hljs-number">166448</span> May <span class="hljs-number">12</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin/dir<br><span class="hljs-number">201839465</span> -rwxr-xr-x. <span class="hljs-number">1</span> root root <span class="hljs-number">166448</span> May <span class="hljs-number">12</span> <span class="hljs-number">2019</span> <span class="hljs-regexp">/usr/</span>bin/ls<br>[root@centos8 data]#diff <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dir /u</span>sr<span class="hljs-regexp">/bin/</span>ls<br>Binary files <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dir and /u</span>sr<span class="hljs-regexp">/bin/</span>ls differ<br>[root@centos8 ~]#cmp <span class="hljs-regexp">/bin/</span>dir <span class="hljs-regexp">/bin/</span>ls<br><span class="hljs-regexp">/bin/</span>dir <span class="hljs-regexp">/bin/</span>ls differ: <span class="hljs-keyword">byte</span> <span class="hljs-number">737</span>, line <span class="hljs-number">2</span><br>#跳过前<span class="hljs-number">735</span>个字节,观察后面<span class="hljs-number">30</span>个字节<br>[root@centos8 ~]#hexdump -s <span class="hljs-number">735</span> -Cn <span class="hljs-number">30</span> <span class="hljs-regexp">/bin/</span>ls<br><span class="hljs-number">000002</span>df <span class="hljs-number">00</span> <span class="hljs-number">05</span> <span class="hljs-number">6</span>d da <span class="hljs-number">3</span>f <span class="hljs-number">1</span>b <span class="hljs-number">77</span> <span class="hljs-number">91</span> <span class="hljs-number">91</span> <span class="hljs-number">63</span> a7 de <span class="hljs-number">55</span> <span class="hljs-number">63</span> a2 b9 |..m.?.w..c..Uc..|<br><span class="hljs-number">000002</span>ef d9 d2 <span class="hljs-number">45</span> <span class="hljs-number">55</span> <span class="hljs-number">4</span>c <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">03</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">7</span>d |..EUL........&#125;|<br><span class="hljs-number">000002</span>fd<br>[root@centos8 ~]#hexdump -s <span class="hljs-number">735</span> -Cn <span class="hljs-number">30</span> <span class="hljs-regexp">/bin/</span>dir<br><span class="hljs-number">000002</span>df <span class="hljs-number">00</span> f1 <span class="hljs-number">21</span> <span class="hljs-number">4</span>e f2 <span class="hljs-number">19</span> <span class="hljs-number">7</span>e ef <span class="hljs-number">38</span> <span class="hljs-number">0</span>d <span class="hljs-number">9</span>b <span class="hljs-number">3</span>e d7 <span class="hljs-number">54</span> <span class="hljs-number">08</span> <span class="hljs-number">39</span> |..!N..~.<span class="hljs-number">8</span>..&gt;.T.<span class="hljs-number">9</span>|<br><span class="hljs-number">000002</span>ef e4 <span class="hljs-number">74</span> <span class="hljs-number">4</span>d <span class="hljs-number">69</span> <span class="hljs-number">25</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">03</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">7</span>d |.tMi%........&#125;|<br><span class="hljs-number">000002</span>fd<br></code></pre></td></tr></table></figure><p>练习<br>1、找出ifconfig “网卡名” 命令结果中本机的IPv4地址</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">[root@rocky8 data]# ifconfig | <span class="hljs-type">tail</span> -n +<span class="hljs-number">2</span> |<span class="hljs-type">head</span> -n1|<span class="hljs-type">tr</span> -s <span class="hljs-string">&quot; &quot;</span>|<span class="hljs-type">cut</span> -d <span class="hljs-string">&quot; &quot;</span> -f3<br><span class="hljs-number">192.168</span><span class="hljs-number">.37</span><span class="hljs-number">.13</span><br></code></pre></td></tr></table></figure><p>2、查出分区空间使用率的最大百分比值</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">[root@rocky8 data]# df |<span class="hljs-type">tr</span> -s <span class="hljs-string">&quot; &quot;</span> | <span class="hljs-type">cut</span> -d <span class="hljs-string">&quot; &quot;</span> -f5|<span class="hljs-type">sort</span> -nr|<span class="hljs-type">head</span> -n1<br><span class="hljs-number">26</span>%<br></code></pre></td></tr></table></figure><p>3、查出用户UID最大值的用户名、UID及shell类型</p><p>4、查出&#x2F;tmp的权限，以数字方式显示<br>5、统计当前连接本机的每个远程主机IP的连接数，并按从大到小排序</p><h1 id="3-正则表达式"><a href="#3-正则表达式" class="headerlink" title="3 正则表达式"></a>3 正则表达式</h1><p>REGEXP： Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符）<br>不表示字符字面意义，而表示控制或通配的功能，类似于增强版的通配符功能，但与通配符不同，通配<br>符功能是用来处理文件名，而正则表达式是处理文本内容中字符<br>正则表达式被很多程序和开发语言所广泛支持：vim, less,grep,sed,awk, nginx,mysql 等<br>正则表达式分两类：</p><ul><li><p>基本正则表达式：BRE Basic Regular Expressions</p></li><li><p>扩展正则表达式：ERE Extended Regular Expressions</p></li></ul><p>正则表达式引擎：<br>采用不同算法，检查处理正则表达式的软件模块，如：PCRE（Perl Compatible Regular<br>Expressions）<br>正则表达式的元字符分类：字符匹配、匹配次数、位置锚定、分组<br>帮助：man 7 regex</p><h2 id="3-1基本正则表达式元字符"><a href="#3-1基本正则表达式元字符" class="headerlink" title="3.1基本正则表达式元字符"></a>3.1基本正则表达式元字符</h2><h3 id="3-1-1字符匹配"><a href="#3-1-1字符匹配" class="headerlink" title="3.1 .1字符匹配"></a>3.1 .1字符匹配</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs txt">. 匹配任意单个字符(除了\n)，可以是一个汉字或其它国家的文字<br>[] 匹配指定范围内的任意单个字符，示例：[wang] [0-9] [a-z] [a-zA-Z]<br>[^] 匹配指定范围外的任意单个字符,示例：[^wang]<br>[:alnum:] 字母和数字<br>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z<br>[:lower:] 小写字母,示例:[[:lower:]],相当于[a-z]<br>[:upper:] 大写字母<br>[:blank:] 空白字符（空格和制表符）<br>[:space:] 包括空格、制表符(水平和垂直)、换行符、回车符等各种类型的空白,比[:blank:]包含的范围<br>广<br>[:cntrl:] 不可打印的控制字符（退格、删除、警铃...）<br>[:digit:] 十进制数字<br>[:xdigit:]十六进制数字<br>[:graph:] 可打印的非空白字符<br>[:print:] 可打印字符<br>[:punct:] 标点符号<br>-----------------<br>\s #匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [\f\r\t\v]。注意 Unicode<br>正则表达式会匹配全角空格符<br>\S #匹配任何非空白字符。等价于 [^\f\r\t\v]<br>\w #匹配一个字母,数字,下划线,汉字,其它国家文字的字符，等价于[_[:alnum:]字]<br>\W #匹配一个非字母,数字,下划线,汉字,其它国家文字的字符，等价于[^_[:alnum:]字]<br></code></pre></td></tr></table></figure><p>案例：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># ls /etc/ | grep <span class="hljs-string">&#x27;rc[.0-6]&#x27;</span></span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>rc.d<br>rc.<span class="hljs-keyword">local</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="3-1-2-匹配次数"><a href="#3-1-2-匹配次数" class="headerlink" title="3.1.2 匹配次数"></a>3.1.2 匹配次数</h3><p>用在要指定次数的字符后面，用于指定前面的字符要出现的次数</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">* #匹配前面的字符任意次，包括0次，贪婪模式：尽可能长的匹配<br>.* #任意长度的任意字符<br>\? #匹配其前面的字符出现0次或1次,即:可有可无<br>\+ #匹配其前面的字符出现最少1次,即:肯定有且 &gt;=1 次<br>\&#123;n\&#125; #匹配前面的字符n次<br>\&#123;m,n\&#125; #匹配前面的字符至少m次，至多n次<br>\&#123;,n\&#125; #匹配前面的字符至多n次,&lt;=n<br>\&#123;n,\&#125; #匹配前面的字符至少n次<br></code></pre></td></tr></table></figure><p>范例: 取IP地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# ifconfig ens160 | grep -o &quot;[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;&quot; | head -n1<br>192.168.37.130<br></code></pre></td></tr></table></figure><h3 id="3-1-3-位置锚定"><a href="#3-1-3-位置锚定" class="headerlink" title="3.1.3 位置锚定"></a>3.1.3 位置锚定</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">^ 行首<br>$ 行尾<br>\&lt;或者\b 语首<br>\&gt;,或者\b 语尾<br></code></pre></td></tr></table></figure><p>案例： 行首</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@rocky8</span> data]<span class="hljs-comment"># grep &quot;^root&quot; passwd </span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br>[root<span class="hljs-variable">@rocky8</span> data]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>案例： 行尾</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[root<span class="hljs-variable">@rocky8</span> data]<span class="hljs-comment"># grep &quot;bash$&quot; passwd </span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">yuankun:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:yuankun</span><span class="hljs-symbol">:/home/yuankun</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">test:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1002</span><span class="hljs-symbol">:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">test1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-number">1003</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/test1</span><span class="hljs-symbol">:/bin/bash</span><br>[root<span class="hljs-variable">@rocky8</span> data]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>案例：语首</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># echo <span class="hljs-string">&#x27;yuankunsir&#x27;</span> | grep <span class="hljs-string">&quot;\&lt;yuan&quot;</span></span><br>yuankunsir<br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><p>案例： 语尾</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># echo <span class="hljs-string">&#x27;yuankunsir&#x27;</span> | grep <span class="hljs-string">&quot;sir\&gt;&quot;</span></span><br>yuankunsir<br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><h3 id="3-1-4-分组其他"><a href="#3-1-4-分组其他" class="headerlink" title="3.1.4 分组其他"></a>3.1.4 分组其他</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livescript">() 分组<br>后向引用：<span class="hljs-string">\1,</span> <span class="hljs-string">\2,</span> ... 注意: <span class="hljs-string">\0</span> 表示正则表达式匹配的所有字符<br>| 或者<br>a|b <span class="hljs-comment">#a或b</span><br>C|cat <span class="hljs-comment">#C或cat</span><br>(C|c)at <span class="hljs-comment">#Cat或cat</span><br></code></pre></td></tr></table></figure><p>案例：分组</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># abc至少出现三次</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># echo <span class="hljs-string">&#x27;abcabcabc&#x27;</span> | grep <span class="hljs-string">&quot;\(abc\)\&#123;3,\&#125;&quot;</span></span><br>abcabcabc<br></code></pre></td></tr></table></figure><p>案例：或者</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# echo &#x27;abc&#x27; |grep &#x27;a\|b&#x27;<br>abc<br></code></pre></td></tr></table></figure><h1 id="4-文本处理三剑客"><a href="#4-文本处理三剑客" class="headerlink" title="4 文本处理三剑客"></a>4 文本处理三剑客</h1><p>grep 命令主要对文本的（正则表达式）行基于模式进行过滤<br>sed：stream editor，文本编辑工具<br>awk：Linux上的实现gawk，文本报告生成器</p><h2 id="4-1-文本处理三剑客之grep"><a href="#4-1-文本处理三剑客之grep" class="headerlink" title="4.1 文本处理三剑客之grep"></a>4.1 文本处理三剑客之grep</h2><p>grep: Global search REgular expression and Print out the line<br>作用：文本搜索工具，根据用户指定的“模式”对目标文本逐行进行匹配检查；打印匹配到的行<br>模式：由正则表达式字符及文本字符所编写的过滤条件<br>帮助:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">https://man7.org/linux/man-pages/man1/grep.1.html<br></code></pre></td></tr></table></figure><p>格式：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">grep [OPTIONS] PATTERN [FILE...]<br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs txt">--color=auto 对匹配到的文本着色显示<br>-m # 匹配#次后停止<br>-v 显示不被pattern匹配到的行,即取反<br>-i 忽略字符大小写<br>-n 显示匹配的行号<br>-c 统计匹配的行数<br>-o 仅显示匹配到的字符串<br>-q 静默模式，不输出任何信息<br>-A # after, 后#行<br>-B # before, 前#行<br>-C # context, 前后各#行<br>-e 实现多个选项间的逻辑or关系,如：grep –e ‘cat &#x27; -e ‘dog&#x27; file<br>-w 匹配整个单词<br>-E 使用ERE，相当于egrep<br>-F 不支持正则表达式，相当于fgrep<br>-P 支持Perl格式的正则表达式<br>-f file 根据模式文件处理<br>-r 递归目录，但不处理软链接<br>-R 递归目录，但处理软链接<br></code></pre></td></tr></table></figure><p>案例：-m</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -m1 root passwd <br>root:x:0:0:root:/root:/bin/bash<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例：-v</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep -v root passwd<br></code></pre></td></tr></table></figure><p>案例：-i</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -i root passwd <br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例：-n</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -n root passwd <br>1:root:x:0:0:root:/root:/bin/bash<br>10:operator:x:11:0:operator:/root:/sbin/nologin<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例：-o</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -o bash passwd <br>bash<br>bash<br>bash<br>bash<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例：-q</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -q root passwd <br>[root@rocky8 data]# echo $?<br>0<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例：-A</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# cat a.txt <br>a<br>b<br>c<br>d<br>e<br>f<br>g<br>h<br>j<br>k<br>l<br>[root@rocky8 data]# grep -A3 a a.txt <br>a<br>b<br>c<br>d<br>[root@rocky8 data]#<br></code></pre></td></tr></table></figure><p>案例: -B</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# cat a.txt <br>a<br>b<br>c<br>d<br>e<br>f<br>g<br>h<br>j<br>k<br>l<br>[root@rocky8 data]# grep -B3 f a.txt <br>c<br>d<br>e<br>f<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例： -C</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# cat a.txt <br>a<br>b<br>c<br>d<br>e<br>f<br>g<br>h<br>j<br>k<br>l<br>[root@rocky8 data]# grep -C2 f a.txt <br>d<br>e<br>f<br>g<br>h<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例： -e</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -e root -e yuankun  passwd <br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>yuankun:x:1000:1000:yuankun:/home/yuankun:/bin/bash<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例： -w</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@rocky8 data]# grep -w root passwd <br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>[root@rocky8 data]# <br></code></pre></td></tr></table></figure><p>案例： -f</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">取两个文件的相同行</span><br>grep -f a.txt b.txt<br></code></pre></td></tr></table></figure><h2 id="4-2-文本处理工具之sed"><a href="#4-2-文本处理工具之sed" class="headerlink" title="4.2 文本处理工具之sed"></a>4.2 文本处理工具之sed</h2><h3 id="4-2-1-sed基本用法"><a href="#4-2-1-sed基本用法" class="headerlink" title="4.2.1 sed基本用法"></a>4.2.1 sed基本用法</h3><p>格式:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">sed [option]<span class="hljs-string">...</span> &#x27;script;script;<span class="hljs-string">...</span>&#x27; [inputfile.<span class="hljs-string">..</span>]<br></code></pre></td></tr></table></figure><p>常用选项</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>n 不输出模式空间内容到屏幕，即不自动打印<br><span class="hljs-literal">-</span>e 多点编辑<br><span class="hljs-literal">-</span>f FILE 从指定文件中读取编辑脚本<br><span class="hljs-literal">-</span>r, -E 使用扩展正则表达式<br><span class="hljs-literal">-</span>i.bak 备份文件并原处编辑<br><span class="hljs-literal">-</span>s 将多个文件视为独立文件，而不是单个连续的长文件流<br><span class="hljs-comment">#说明:</span><br><span class="hljs-literal">-</span>ir 不支持<br><span class="hljs-literal">-</span>i -r 支持<br><span class="hljs-literal">-</span>ri 支持<br><span class="hljs-literal">-</span>ni 危险选项,会清空文件<br></code></pre></td></tr></table></figure><p>script格式：</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scheme"><span class="hljs-symbol">&#x27;地址命令</span>&#x27;<br></code></pre></td></tr></table></figure><p>地址格式：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>. 不给地址：对全文进行处理<br><span class="hljs-number">2</span>. 单地址：<br><span class="hljs-comment">#：指定的行，$：最后一行</span><br><span class="hljs-regexp">/pattern/</span>：被此处模式所能够匹配到的每一行<br><span class="hljs-number">3</span>. 地址范围：<br><span class="hljs-comment">#,# #从#行到第#行，3，6 从第3行到第6行</span><br><span class="hljs-comment">#,+# #从#行到+#行，3,+4 表示从3行到第7行</span><br><span class="hljs-regexp">/pat1/</span>,<span class="hljs-regexp">/pat2/</span><br><span class="hljs-comment">#,/pat/</span><br><span class="hljs-regexp">/pat/</span>,<span class="hljs-comment">#</span><br><span class="hljs-number">4</span>. 步进：~<br><span class="hljs-number">1</span>~<span class="hljs-number">2</span> 奇数行<br><span class="hljs-number">2</span>~<span class="hljs-number">2</span> 偶数行<br></code></pre></td></tr></table></figure><p>命令：</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs excel">p 打印当前模式空间内容，追加到默认输出之后<br>Ip 忽略大小写输出<br>d 删除模式空间匹配的行，并立即启用下一轮循环<br>a [\]<span class="hljs-built_in">text</span> 在指定行后面追加文本，支持使用\n实现多行追加<br>i [\]<span class="hljs-built_in">text</span> 在行前面插入文本<br>c [\]<span class="hljs-built_in">text</span> 替换行为单行或多行文本<br>w file 保存模式匹配的行至指定文件<br>r file 读取指定文件的文本至模式空间中匹配到的行后<br>= 为模式空间中的行打印行号<br>! 模式空间中匹配行取反处理<br>q 结束或退出sed<br></code></pre></td></tr></table></figure><p>查找和替换：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">s<span class="hljs-regexp">/pattern/</span>string/修饰符 查找替换,支持使用其它分隔符，可以是其它形式：s@@@，s<span class="hljs-comment">###</span><br>替换修饰符：<br>g 行内全局替换<br>p 显示替换成功的行<br>w <span class="hljs-regexp">/PATH/</span>FILE 将替换成功的行保存至文件中<br>I,i 忽略大小写<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-meta"># sed默认会将输入信息输出到屏幕</span><br>[root@rocky8 <span class="hljs-class"><span class="hljs-keyword">data</span>]# sed &quot;&quot;</span><br><span class="hljs-title">hello</span><br><span class="hljs-title">hello</span><br><span class="hljs-title">yuan</span><br><span class="hljs-title">yuan</span><br><span class="hljs-class"><span class="hljs-keyword">data</span></span><br><span class="hljs-class"><span class="hljs-keyword">data</span></span><br></code></pre></td></tr></table></figure><p>案例：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># 打印第三行，默认会输出所有，-n选项不输出模式空间内容到屏幕，即不自动打印</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed <span class="hljs-string">&#x27;3p&#x27;</span></span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br><span class="hljs-number">6</span><br><span class="hljs-number">7</span><br><span class="hljs-number">8</span><br><span class="hljs-number">9</span><br><span class="hljs-number">10</span><br><span class="hljs-meta"># p 打印当前模式空间内容，追加到默认输出之后</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed -n <span class="hljs-string">&#x27;3p&#x27;</span></span><br><span class="hljs-number">3</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br><br><span class="hljs-meta"># 删除第三行</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed  <span class="hljs-string">&#x27;3d&#x27;</span></span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br><span class="hljs-number">6</span><br><span class="hljs-number">7</span><br><span class="hljs-number">8</span><br><span class="hljs-number">9</span><br><span class="hljs-number">10</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br><br><span class="hljs-meta"># 输出第三行至最后一行</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed -n  <span class="hljs-string">&#x27;3,$p&#x27;</span></span><br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br><span class="hljs-number">6</span><br><span class="hljs-number">7</span><br><span class="hljs-number">8</span><br><span class="hljs-number">9</span><br><span class="hljs-number">10</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br><br><span class="hljs-meta"># 输出奇数行</span><br>[root<span class="hljs-symbol">@rocky8</span> etc]<span class="hljs-meta"># seq 10 | sed -n <span class="hljs-string">&#x27;1~2p&#x27;</span></span><br><span class="hljs-number">1</span><br><span class="hljs-number">3</span><br><span class="hljs-number">5</span><br><span class="hljs-number">7</span><br><span class="hljs-number">9</span><br><br><span class="hljs-meta"># 输出偶数行</span><br>[root<span class="hljs-symbol">@rocky8</span> etc]<span class="hljs-meta"># seq 10 | sed -n <span class="hljs-string">&#x27;2~2p&#x27;</span></span><br><span class="hljs-number">2</span><br><span class="hljs-number">4</span><br><span class="hljs-number">6</span><br><span class="hljs-number">8</span><br><span class="hljs-number">10</span><br>[root<span class="hljs-symbol">@rocky8</span> etc]<span class="hljs-meta"># </span><br><br><span class="hljs-meta"># 追加，在偶数行追加hello</span><br>[root<span class="hljs-symbol">@rocky8</span> etc]<span class="hljs-meta"># seq 10 | sed  <span class="hljs-string">&#x27;2~2ahello&#x27;</span></span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br>hello<br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br>hello<br><span class="hljs-number">5</span><br><span class="hljs-number">6</span><br>hello<br><span class="hljs-number">7</span><br><span class="hljs-number">8</span><br>hello<br><span class="hljs-number">9</span><br><span class="hljs-number">10</span><br>hello<br></code></pre></td></tr></table></figure><p>案例：行前和行首添加文本</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# cat <span class="hljs-keyword">data</span>.txt <br><br>hello my name <span class="hljs-keyword">is</span> lihua<br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# sed -i <span class="hljs-string">&#x27;/hello/a12138&#x27;</span> <span class="hljs-keyword">data</span>.txt <br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# cat <span class="hljs-keyword">data</span>.txt <br><br>hello my name <span class="hljs-keyword">is</span> lihua<br><span class="hljs-number">12138</span><br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# sed -i <span class="hljs-string">&#x27;/hello/i12138&#x27;</span> <span class="hljs-keyword">data</span>.txt <br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# cat <span class="hljs-keyword">data</span>.txt <br><br><span class="hljs-number">12138</span><br>hello my name <span class="hljs-keyword">is</span> lihua<br><span class="hljs-number">12138</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1659531426952.png" srcset="/img/loading.gif" lazyload alt="1659531426952"></p><p>案例：替换行为单行或多行文本</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# cat <span class="hljs-keyword">data</span>.txt <br><br><span class="hljs-number">852</span>   a<br><span class="hljs-number">852</span>   b<br><span class="hljs-number">852</span>   c<br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# sed -i <span class="hljs-string">&#x27;/852/c hello&#x27;</span> <span class="hljs-keyword">data</span>.txt <br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# cat <span class="hljs-keyword">data</span>.txt <br><br>hello<br>hello<br>hello<br>[<span class="hljs-symbol">root@</span>rocky8 <span class="hljs-keyword">data</span>]# <br></code></pre></td></tr></table></figure><p>案例：保存模式匹配的行至指定文件</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># cat a.txt </span><br><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed -n <span class="hljs-string">&#x27;1~2w a.txt&#x27;</span></span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># cat a.txt </span><br><span class="hljs-number">1</span><br><span class="hljs-number">3</span><br><span class="hljs-number">5</span><br><span class="hljs-number">7</span><br><span class="hljs-number">9</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><p>案例：读取指定文件的文本至模式空间中匹配到的行后</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@rocky8 data]<span class="hljs-comment"># seq 10 | sed &#x27;1~2r /etc/issue&#x27;</span><br><span class="hljs-number">1</span><br><span class="hljs-string">\S</span><br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-string">\S</span><br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br><span class="hljs-string">\S</span><br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br><br><span class="hljs-number">6</span><br><span class="hljs-number">7</span><br><span class="hljs-string">\S</span><br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br><br><span class="hljs-number">8</span><br><span class="hljs-number">9</span><br><span class="hljs-string">\S</span><br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br><br><span class="hljs-number">10</span><br>[root@rocky8 data]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>案例：! 模式空间中匹配行取反处理</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># 1~2奇数行，加上！取反就是偶数行</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># seq 10 | sed -n <span class="hljs-string">&#x27;1~2!p&#x27;</span></span><br><span class="hljs-number">2</span><br><span class="hljs-number">4</span><br><span class="hljs-number">6</span><br><span class="hljs-number">8</span><br><span class="hljs-number">10</span><br>[root<span class="hljs-symbol">@rocky8</span> data]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><h2 id="4-3-文本处理工具之awk"><a href="#4-3-文本处理工具之awk" class="headerlink" title="4.3 文本处理工具之awk"></a>4.3 文本处理工具之awk</h2></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/">#Linux从入门到放弃</a></div></div><div class="license-box my-3"><div class="license-title"><div>文本处理工具和正则表达式</div><div>https://itshare.work/2022/07/26/文本处理工具和正则表达式/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>勒马听风</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年7月26日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年12月16日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/08/01/%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%92%8C%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9/" title="文件查找和打包压缩"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">文件查找和打包压缩</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/07/25/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%8F%8A%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7/" title="权限管理及文本编辑工具"><span class="hidden-mobile">权限管理及文本编辑工具</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"hQDROocUhxVs3CipuQjO33sY-gzGzoHsz",appKey:"CHcmi9bz6KRRaChFJVSY14g1",path:"window.location.pathname",placeholder:"请在这里书写你想说的话······",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><span>由<a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>强力驱动</span> <i class="iconfont icon-love"></i> <span>主题</span> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <i class="iconfont icon-love"></i> <span>©2022</span></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访问客数 <span id="leancloud-site-uv"></span> 人</span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">黔ICP备2022006994号-2 </a></span><span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=http://beian.miit.gov.cn/" rel="nofollow noopener" class="beian-police" target="_blank"><span style="visibility:hidden;width:0">|</span> <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"> <span>黔公网安备2022006994号</span></a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/caidai.js"></script><script src="/js/love.main.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>