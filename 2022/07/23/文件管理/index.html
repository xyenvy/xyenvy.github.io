<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico"><link rel="icon" href="/img/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="勒马听风"><meta name="keywords" content="hexo,theme,fluid,linux,ops,运维,分享"><meta name="description" content="Linux中的所有数据都被保存在文件中，所有的文件被分配到不同的目录。目录是一种类似于树的结构，称为文件系统;当你使用Linux时，大部分时间都会和文件打交道，通过本节可以了解基本的文件操作，如创建文件、删除文件、复制文件、重命名文件以及为文件创建链接等。"><meta property="og:type" content="article"><meta property="og:title" content="Linux文件管理"><meta property="og:url" content="https://itshare.work/2022/07/23/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/index.html"><meta property="og:site_name" content="echops-懂运维的测试"><meta property="og:description" content="Linux中的所有数据都被保存在文件中，所有的文件被分配到不同的目录。目录是一种类似于树的结构，称为文件系统;当你使用Linux时，大部分时间都会和文件打交道，通过本节可以了解基本的文件操作，如创建文件、删除文件、复制文件、重命名文件以及为文件创建链接等。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://itshare.work/image.assets/1659539858891.png"><meta property="article:published_time" content="2022-07-23T08:37:00.000Z"><meta property="article:modified_time" content="2022-11-13T02:07:00.639Z"><meta property="article:author" content="yuankun"><meta property="article:tag" content="Linux从入门到放弃"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://itshare.work/image.assets/1659539858891.png"><title>Linux文件管理 - echops-懂运维的测试</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/tbdzj.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"itshare.work",root:"/",version:"1.9.3",typing:{enable:!1,typeSpeed:70,cursorChar:" ",loop:!0,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"text"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"hQDROocUhxVs3CipuQjO33sY-gzGzoHsz",app_key:"CHcmi9bz6KRRaChFJVSY14g1",server_url:"https://hqdroocu.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Echops</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 文章</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档 </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类 </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">Linux文件管理</span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-07-23 16:37" pubdate>2022年7月23日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 13k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 105 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Linux文件管理</h1><p class="note note-info">本文最后更新于：2022年11月13日 上午</p><div class="markdown-body"><p class="note note-success">文件管理</p># 1.文件系统目录结构<h2 id="1-1常见的文件系统目录功能"><a href="#1-1常见的文件系统目录功能" class="headerlink" title="1.1常见的文件系统目录功能"></a>1.1常见的文件系统目录功能</h2><p><img src="/../image.assets/1658580842757.png" srcset="/img/loading.gif" lazyload alt="1658580842757"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">/boot：引导文件存放目录，内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录<br>/bin：所有用户使用的基本命令；不能关联至独立分区，OS启动即会用到的程序<br>/sbin：管理类的基本命令；不能关联至独立分区，OS启动即会用到的程序<br>/lib：启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules)<br>/lib64：专用于x86_64系统上的辅助共享库文件存放位置<br>/etc：配置文件目录<br>/home/USERNAME：普通用户家目录<br>/root：管理员的家目录<br>/media：便携式移动设备挂载点<br>/mnt：临时文件系统挂载点<br>/dev：设备文件及特殊文件存储位置<br>b: block device，随机访问<br>c: character device，线性访问<br>/opt：第三方应用程序的安装位置<br>/srv：系统上运行的服务用到的数据<br>/tmp：临时文件存储位置<br>/usr: universal shared, read-only data<br>bin: 保证系统拥有完整功能而提供的应用程序<br>sbin:<br>lib：32位使用<br>lib64：只存在64位系统<br>include: C程序的头文件(header files)<br>share：结构化独立的数据，例如doc, man等<br><span class="hljs-built_in">local</span>：第三方应用程序的安装位置<br>bin, sbin, lib, lib64, etc, share<br>/var: variable data files<br>cache: 应用程序缓存数据目录<br>lib: 应用程序状态信息数据<br><span class="hljs-built_in">local</span>：专用于为/usr/local下的应用程序存储可变数据<br>lock: 锁文件<br><span class="hljs-built_in">log</span>: 日志目录及文件<br>opt: 专用于为/opt下的应用程序存储可变数据<br>run: 运行中的进程相关数据,通常用于存储进程pid文件<br>spool: 应用程序数据池<br>tmp: 保存系统两次重启之间产生的临时数据<br>/proc: 用于输出内核与进程信息相关的虚拟文件系统<br>/sys：用于输出当前系统上硬件设备相关信息虚拟文件系统<br>/selinux: security enhanced Linux，selinux相关的安全策略等信息的存储位置<br></code></pre></td></tr></table></figure><h2 id="1-2Linux下的文件类型"><a href="#1-2Linux下的文件类型" class="headerlink" title="1.2Linux下的文件类型"></a>1.2Linux下的文件类型</h2><ul><li>-普通文件</li><li>d 目录文件directory</li><li>I 符号链接文件link</li><li>b 块设备block</li><li>c 字符设备character</li><li>p 管道文件pipe</li><li>s 套接字文件socket</li></ul><p><mark>注意:面试题目容易出现</mark></p><p><img src="/../image.assets/1658568673282.png" srcset="/img/loading.gif" lazyload alt="1658568673282"></p><h1 id="2-文件操作命令"><a href="#2-文件操作命令" class="headerlink" title="2.文件操作命令"></a>2.文件操作命令</h1><h2 id="2-1相对路径和绝对路径"><a href="#2-1相对路径和绝对路径" class="headerlink" title="2.1相对路径和绝对路径"></a>2.1相对路径和绝对路径</h2><ul><li>绝对路径<br>以正斜杠&#x2F; 即根目录开始<br>完整的文件的位置路径<br>可用于任何想指定一个文件名的时候</li><li>相对路径名<br>不以斜线开始<br>一般情况下，是指相对于当前工作目录的路径，特殊场景下，是相对于某目录的位置<br>可以作为一个简短的形式指定一个文件名</li><li>基名：basename，只取文件名而不要路径</li><li>目录名：dirname，只取路径，不要文件名<br>范例:</li></ul><p><img src="/../image.assets/1658569417929.png" srcset="/img/loading.gif" lazyload alt="1658569417929"></p><h2 id="2-2更改目录"><a href="#2-2更改目录" class="headerlink" title="2.2更改目录"></a>2.2更改目录</h2><p>命令 cd ： change directory 改变目录<br>选项：-P 切换至物理路径，而非软链接目录<br>可以使用绝对或相对路径<br>切换至父目录： cd ..<br>切换至当前用户主目录： cd<br>切换至以前的工作目录： cd -</p><h2 id="2-3列出目录内容"><a href="#2-3列出目录内容" class="headerlink" title="2.3列出目录内容"></a>2.3列出目录内容</h2><p>ls 命令可以列出当前目录的内容或指定目录<br>用法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ls <span class="hljs-selector-attr">[options]</span> <span class="hljs-selector-attr">[files_or_dirs]</span><br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-a 包含隐藏文件</span><br><span class="hljs-deletion">-l 显示额外的信息</span><br><span class="hljs-deletion">-R 目录递归</span><br><span class="hljs-deletion">-ld 目录和符号链接信息</span><br><span class="hljs-deletion">-1 文件分行显示</span><br><span class="hljs-deletion">-S 按从大到小排序</span><br><span class="hljs-deletion">-t 按mtime排序</span><br><span class="hljs-deletion">-u 配合-t选项，显示并按atime从新到旧排序</span><br><span class="hljs-deletion">-U 按目录存放顺序显示</span><br><span class="hljs-deletion">-X 按文件后缀排序</span><br><span class="hljs-deletion">-F 对不同类型文件显示时附加不同的符号：*/=&gt;@|</span><br><span class="hljs-deletion">-C 文件多时，以多列的方式显示文件，默认是一列（标准输出）</span><br></code></pre></td></tr></table></figure><p>说明：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> 查看不同后缀文件时的颜色由 /etc/DIR_COLORS 和@LS_COLORS变量定义<br><span class="hljs-built_in">ls</span> -l 看到文件的大小,不一定是实际文件真正占用空间的大小<br></code></pre></td></tr></table></figure><h2 id="2-4查看文件状态"><a href="#2-4查看文件状态" class="headerlink" title="2.4查看文件状态"></a>2.4查看文件状态</h2><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">stat</span> filename<br></code></pre></td></tr></table></figure><p>每个文件有三个时间戳：</p><ul><li>access time 访问时间，atime，读取文件内容</li><li>modify time 修改时间，mtime，改变文件内容（数据）</li><li>change time 改变时间，ctime，元数据发生改变</li></ul><p><img src="/../image.assets/1658570229648.png" srcset="/img/loading.gif" lazyload alt="1658570229648"></p><h2 id="2-5查看文件内容"><a href="#2-5查看文件内容" class="headerlink" title="2.5查看文件内容"></a>2.5查看文件内容</h2><p>用法：</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">file</span> [<span class="hljs-keyword">options</span>] <span class="hljs-keyword">filename</span><br></code></pre></td></tr></table></figure><p>常用选项：</p><ul><li>-b 列出文件辨识结果时，不显示文件名称</li><li>-f filelist 列出文件filelist中文件名的文件类型</li><li>-F 使用指定分隔符号替换输出文件名后默认的”:”分隔符</li><li>-L 查看对应软链接对应文件的文件类型</li><li>–help 显示命令在线帮助</li></ul><p><img src="/../image.assets/1658570620547.png" srcset="/img/loading.gif" lazyload alt="1658570620547"></p><h2 id="2-6文件通配符模式"><a href="#2-6文件通配符模式" class="headerlink" title="2.6文件通配符模式"></a>2.6文件通配符模式</h2><p>常见的通配符如下</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs prolog">* 匹配零个或多个字符，但不匹配 <span class="hljs-string">&quot;.&quot;</span> 开头的文件，即隐藏文件<br>? 匹配任何单个字符,一个汉字也算一个字符<br>~ 当前用户家目录<br>~mage 用户mage家目录<br>[<span class="hljs-number">0</span><span class="hljs-number">-9</span>] 匹配数字范围<br>[a-z] 一个字母<br>[<span class="hljs-symbol">A</span>-<span class="hljs-symbol">Z</span>] 一个字母<br>[wang] 匹配列表中的任何的一个字符<br>[^wang] 匹配列表中的所有字符以外的字符<br>[^a-z] 匹配列表中的所有字符以外的字符<br>. 和 ~+ 当前工作目录<br>~- 前一个工作目录<br></code></pre></td></tr></table></figure><h2 id="2-7批量修改文件名"><a href="#2-7批量修改文件名" class="headerlink" title="2.7批量修改文件名"></a>2.7批量修改文件名</h2><p>利用 rename 可以批量修改文件名<br>格式：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">rename</span> [<span class="hljs-keyword">options</span>] <span class="hljs-symbol">&lt;expression&gt;</span> <span class="hljs-symbol">&lt;replacement&gt;</span> <span class="hljs-symbol">&lt;file&gt;</span>...<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment">#为所有的f开头包含conf的文件加上.bak后缀：</span><br><span class="hljs-built_in">rename</span> <span class="hljs-string">&#x27;conf&#x27;</span> <span class="hljs-string">&#x27;conf.bak&#x27;</span> f*<br><span class="hljs-comment">#去掉所有的bak后缀：</span><br><span class="hljs-built_in">rename</span> <span class="hljs-string">&#x27;.bak&#x27;</span> <span class="hljs-string">&#x27;&#x27;</span> *.bak<br></code></pre></td></tr></table></figure><h1 id="3-硬链接和软链接"><a href="#3-硬链接和软链接" class="headerlink" title="3.硬链接和软链接"></a>3.硬链接和软链接</h1><h2 id="3-1硬链接"><a href="#3-1硬链接" class="headerlink" title="3.1硬链接"></a>3.1硬链接</h2><p>硬链接本质上就给一个文件起一个新的名称，实质是同一个文件<br>硬链接特性</p><ul><li>创建硬链接会在对应的目录中增加额外的记录项以引用文件</li><li>对应于同一文件系统上一个物理文件</li><li>每个目录引用相同的inode号</li><li>创建时链接数递增</li><li>删除文件时：rm命令递减计数的链接，文件要存在，至少有一个链接数，当链接数为零时，该文件被删除</li><li>不能跨越驱动器或分区</li><li>不支持对目录创建硬链接</li></ul><p>格式：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ln</span> filename<span class="hljs-meta"> [linkname]</span><br></code></pre></td></tr></table></figure><h2 id="3-2软链接"><a href="#3-2软链接" class="headerlink" title="3.2软链接"></a>3.2软链接</h2><p>一个符号链接指向另一个文件,就像 windows 中快捷方式，软链接文件和原文件本质上不是同一个文件<br>软链接特点</p><ul><li>一个符号链接的内容是它引用文件的名称</li><li>可以对目录创建软链接</li><li>可以跨分区的文件实现</li><li>指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减少目标文件inode的引用计数</li><li>在创建软链接时, 如果源文件使用相对路径，是相对于软链接文件的路径，而非相对于当前工作目录,但是软链接的路径如果是相对路径,则是相对于当前工作目录<br>格式：<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ln</span> -s filename<span class="hljs-meta"> [linkname]</span><br></code></pre></td></tr></table></figure>范例： 查看软链接</li></ul><p><img src="/../image.assets/1658588131214.png" srcset="/img/loading.gif" lazyload alt="1658588131214"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/data/</span>dirlink <span class="hljs-comment">#只删除软链接本身,不会删除源目录内容</span><br>rm -rf <span class="hljs-regexp">/data/</span>dirlink/ <span class="hljs-comment">#删除源目录的文件,但不会删除链接文件,此方法非常危险</span><br><span class="hljs-comment">#注意: 删除此软链接务必不要加-r选项</span><br></code></pre></td></tr></table></figure><h1 id="4-硬链接和软链接区别"><a href="#4-硬链接和软链接区别" class="headerlink" title="4.硬链接和软链接区别"></a>4.硬链接和软链接区别</h1><ol><li>本质：</li></ol><ul><li>硬链接：本质是同一个文件</li><li>软链接：本质不是同一个文件</li></ul><ol start="2"><li>跨设备</li></ol><ul><li>硬链接：不支持</li><li>软链接：支持</li></ul><ol start="3"><li>inode</li></ol><ul><li>硬链接：相同</li><li>软链接：不同</li></ul><ol start="4"><li>链接数</li></ol><ul><li>硬链接：创建新的硬链接,链接数会增加,删除硬链接,链接数减少</li><li>软链接：创建或删除,链接数不会变化</li></ul><ol start="5"><li>文件夹</li></ol><ul><li>硬链接：不支持</li><li>软链接：支持</li></ul><ol start="6"><li>相对路径</li></ol><ul><li>硬链接：原始文件相对路径是相对于当前工作目录</li><li>软链接：原始文件的相对路径是相对于链接文件的相对路径</li></ul><ol start="7"><li>删除源文件</li></ol><ul><li>硬链接：只是链接数减一,但链接文件的访问不受影响</li><li>软链接：链接文件将无法访问</li></ul><ol start="8"><li>文件类型</li></ol><ul><li>硬链接：和源文件相同</li><li>软链接：链接文件,和源文件无关</li></ul><ol start="9"><li>文件大小</li></ol><ul><li>硬链接: 和源文件相同</li><li>软链接: 源文件的路径的长度</li></ul><h1 id="5-生产案例"><a href="#5-生产案例" class="headerlink" title="5.生产案例"></a>5.生产案例</h1><ul><li>案例1：提示空间满 No space left on device，但 df 可以看到空间很多，为什么？<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go">解决方法：节点编号用完了，增加节点编号增加不了，说明你的磁盘上的文件都是小文件；<br><span class="hljs-number">1</span>、删除不用的文件和文件夹释放inode<br><span class="hljs-number">2</span>、迁移数据到新磁盘然后格式化重新指定inode<br>知识点：<br><span class="hljs-number">1.</span>Linux下一个文件夹或者一个文件就会占用一个inode资源<br><span class="hljs-number">2.i</span>node资源数量是在格式化磁盘的时候就指定的（可以不指定，但也会有一个值），要更改这个<br>数量必须格式化磁盘<br><span class="hljs-number">3.</span>如果某个磁盘的inode资源用尽，即便磁盘有空间，也不能进行任何文件或者文件夹的新增<br><span class="hljs-number">4.</span>删除一个文件夹或者文件就能释放一个inode资源<br></code></pre></td></tr></table></figure></li><li>案例2：提示空间快满，使用 rm 删除了很大的无用文件后，df仍然看到空间不足，为什么？如何解决？<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">有其他程序在使用该文件，可以清空该文件内容。使用&gt;清空文件内容<br><span class="hljs-quote">&gt; filename</span><br><span class="hljs-section"># &gt; test.log</span><br></code></pre></td></tr></table></figure></li></ul><p><img src="/../image.assets/1658589334005.png" srcset="/img/loading.gif" lazyload alt="1658589334005"></p><h1 id="6-重定向和管道"><a href="#6-重定向和管道" class="headerlink" title="6.重定向和管道"></a>6.重定向和管道</h1><h2 id="6-1-标准输入和输出"><a href="#6-1-标准输入和输出" class="headerlink" title="6.1 标准输入和输出"></a>6.1 标准输入和输出</h2><p>程序：指令+数据<br>读入数据：Input<br>输出数据：Output<br>打开的文件都有一个fd: file descriptor (文件描述符)<br>Linux给程序提供三种 I&#x2F;O 设备</p><ul><li>标准输入（STDIN） －0 默认接受来自终端窗口的输入</li><li>标准输出（STDOUT）－1 默认输出到终端窗口</li><li>标准错误（STDERR） －2 默认输出到终端窗口</li></ul><h2 id="6-2标准的输出和错误重定向"><a href="#6-2标准的输出和错误重定向" class="headerlink" title="6.2标准的输出和错误重定向"></a>6.2标准的输出和错误重定向</h2><p>格式：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">命令 操作符号 文件名<br></code></pre></td></tr></table></figure><p>支持的操作符号包括：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-meta prompt_">1&gt; </span>或 &gt; 把STDOUT重定向到文件<br><span class="hljs-meta prompt_">2&gt; </span>把STDERR重定向到文件<br>&amp;&gt; 把标准输出和错误都重定向<br>&gt;&amp; 和上面功能一样，建议使用上面方式<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658627818949.png" srcset="/img/loading.gif" lazyload alt="1658627818949"></p><p><img src="/../image.assets/1658627951062.png" srcset="/img/loading.gif" lazyload alt="1658627951062"></p><p><img src="/../image.assets/1658628044574.png" srcset="/img/loading.gif" lazyload alt="1658628044574"></p><p>以上的文件如果已经存在，文件内容则会覆盖</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># &gt;&gt; 可以在原有的基础内容上追加内容</span><br><span class="hljs-meta prompt_">&gt;&gt;</span> 追加标准输出重定向至文件<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658628188096.png" srcset="/img/loading.gif" lazyload alt="1658628188096"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">2&gt;</span><span class="language-bash">&gt; 追加标准错误重定向至文件</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658628249117.png" srcset="/img/loading.gif" lazyload alt="1658628249117"></p><h2 id="6-3将标准输出和错误输出指定向不同的文件"><a href="#6-3将标准输出和错误输出指定向不同的文件" class="headerlink" title="6.3将标准输出和错误输出指定向不同的文件"></a>6.3将标准输出和错误输出指定向不同的文件</h2><p>格式：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">COMMAND &gt; /path/<span class="hljs-keyword">to</span>/<span class="hljs-built_in">file</span>.<span class="hljs-built_in">log</span> <span class="hljs-number">2</span>&gt; /path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">error</span>.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658628570176.png" srcset="/img/loading.gif" lazyload alt="1658628570176"></p><h2 id="6-4合并标准输出和错误输出为同一个数据流进行重定向"><a href="#6-4合并标准输出和错误输出为同一个数据流进行重定向" class="headerlink" title="6.4合并标准输出和错误输出为同一个数据流进行重定向"></a>6.4合并标准输出和错误输出为同一个数据流进行重定向</h2><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs delphi">&amp;&gt; 覆盖重定向<br>&amp;&gt;&gt; 追加重定向<br>COMMAND &gt; /path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">file</span>.<span class="hljs-keyword">out</span> <span class="hljs-number">2</span>&gt;<span class="hljs-number">&amp;1</span> （顺序很重要）<br>COMMAND &gt;&gt; /path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">file</span>.<span class="hljs-keyword">out</span> <span class="hljs-number">2</span>&gt;<span class="hljs-number">&amp;1</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658628863373.png" srcset="/img/loading.gif" lazyload alt="1658628863373"></p><p><img src="/../image.assets/1658628910790.png" srcset="/img/loading.gif" lazyload alt="1658628910790"></p><p><img src="/../image.assets/1658629123843.png" srcset="/img/loading.gif" lazyload alt="1658629123843"></p><ul><li>错误案例</li></ul><p><img src="/../image.assets/1658629245131.png" srcset="/img/loading.gif" lazyload alt="1658629245131"></p><h2 id="6-5标准输入重定向"><a href="#6-5标准输入重定向" class="headerlink" title="6.5标准输入重定向"></a>6.5标准输入重定向</h2><p>实现标准输入重定向的符号</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">COMMAND</span> <span class="hljs-number">0</span>&lt; <span class="hljs-keyword">FILE</span><br><span class="hljs-keyword">COMMAND</span> &lt; <span class="hljs-keyword">FILE</span><br></code></pre></td></tr></table></figure><ul><li>面试题：</li></ul><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-comment"># 求1+2+···+10的和</span><br><span class="hljs-type">seq</span> -s+ <span class="hljs-number">10</span> &gt; <span class="hljs-type">seq</span>.log<br>bc &lt; <span class="hljs-type">seq</span>.log<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658631614537.png" srcset="/img/loading.gif" lazyload alt="1658631614537"></p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nim">扩展：求<span class="hljs-number">1</span>*<span class="hljs-number">2</span>*···*<span class="hljs-number">10</span>的值：<br><span class="hljs-type">seq</span> -s* <span class="hljs-number">10</span> &gt;<span class="hljs-type">seq</span>.log<br>bc &lt; <span class="hljs-type">seq</span>.log<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658631847010.png" srcset="/img/loading.gif" lazyload alt="1658631847010"></p><p><img src="/../image.assets/1658631986469.png" srcset="/img/loading.gif" lazyload alt="1658631986469"></p><h3 id="6-5-1tr命令"><a href="#6-5-1tr命令" class="headerlink" title="6.5.1tr命令"></a>6.5.1tr命令</h3><p>tr 转换和删除字符</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">tr</span> <span class="hljs-selector-attr">[option]</span> ··· SET1 <span class="hljs-selector-attr">[SET2]</span><br></code></pre></td></tr></table></figure><p>选项：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css">-d <span class="hljs-attr">--delete</span>：删除所有属于第一字符集的字符<br>-s <span class="hljs-attr">--squeeze-repeats</span>：把连续重复的字符以单独一个字符表示,即去重<br>-t <span class="hljs-attr">--truncate-set1</span>：将第一个字符集对应字符转化为第二字符集对应的字符<br>-c –C <span class="hljs-attr">--complement</span>：取字符集的补集<br>\NNN character with octal value NNN (<span class="hljs-number">1</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">3</span> octal digits)<br>\\ backslash<br>\<span class="hljs-selector-tag">a</span> audible BEL<br>\<span class="hljs-selector-tag">b</span> backspace<br>\f <span class="hljs-selector-tag">form</span> feed<br>\n new line<br>\r return<br>\t horizontal tab<br>\v vertical tab<br><span class="hljs-selector-attr">[:alnum:]</span>：字母和数字<br><span class="hljs-selector-attr">[:alpha:]</span>：字母<br><span class="hljs-selector-attr">[:digit:]</span>：数字<br><span class="hljs-selector-attr">[:lower:]</span>：小写字母<br><span class="hljs-selector-attr">[:upper:]</span>：大写字母<br><span class="hljs-selector-attr">[:space:]</span>：空白字符<br><span class="hljs-selector-attr">[:print:]</span>：可打印字符<br><span class="hljs-selector-attr">[:punct:]</span>：标点符号<br><span class="hljs-selector-attr">[:graph:]</span>：图形字符<br><span class="hljs-selector-attr">[:cntrl:]</span>：控制（非打印）字符<br><span class="hljs-selector-attr">[:xdigit:]</span>：十六进制字符<br></code></pre></td></tr></table></figure><p>范例：</p><ul><li>删除字符,删除’abcd’中的’a’</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> abcd | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">&#x27;a&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658633116721.png" srcset="/img/loading.gif" lazyload alt="1658633116721"></p><ul><li>将’aaabbbccc‘中字符去重</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> aaabbbccc |<span class="hljs-built_in">tr</span> -s <span class="hljs-string">&#x27;abc&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658633240146.png" srcset="/img/loading.gif" lazyload alt="1658633240146"></p><ul><li>输入df将空格用”+”替换</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> | <span class="hljs-built_in">tr</span> -s <span class="hljs-string">&#x27; &#x27;</span> +<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658633697556.png" srcset="/img/loading.gif" lazyload alt="1658633697556"></p><h3 id="6-5-2多行重定向"><a href="#6-5-2多行重定向" class="headerlink" title="6.5.2多行重定向"></a>6.5.2多行重定向</h3><p>使用 “&lt;&lt;终止词” 命令从键盘把多行重导向给STDIN，直到终止词位置之前的所有文本都发送给<br>STDIN，有时被称为就地文本（here documents）<br>其中终止词可以是任何一个或多个符号，比如：!，@，$，EOF（End Of File），magedu等，其中EOF<br>比较常用</p><p>范例：</p><p><img src="/../image.assets/1658634064057.png" srcset="/img/loading.gif" lazyload alt="1658634064057"></p><h3 id="6-5-3高级重定向"><a href="#6-5-3高级重定向" class="headerlink" title="6.5.3高级重定向"></a>6.5.3高级重定向</h3><h4 id="6-5-3-1-cmd1-lt-lt-cmd2"><a href="#6-5-3-1-cmd1-lt-lt-cmd2" class="headerlink" title="6.5.3.1 cmd1 &lt; &lt;(cmd2)"></a>6.5.3.1 cmd1 &lt; &lt;(cmd2)</h4><p>名称为 Process substitution ,是由两个部分组成<br>&lt;(cmd2) 表示把cmd2的输出写入一个临时文件, 注意：&lt;和（之间无空格<br>cmd1 &lt; 这是一个标准的stdin重定向<br>把两个合起来，就是把cmd2的输出stdout传递给cmd1作为输入stdin, 中间通过临时文件做传递</p><p><img src="/../image.assets/1658634342387.png" srcset="/img/loading.gif" lazyload alt="1658634342387"></p><h4 id="6-5-3-2cmd1-lt-lt-lt-’string’"><a href="#6-5-3-2cmd1-lt-lt-lt-’string’" class="headerlink" title="6.5.3.2cmd1&lt;&lt;&lt;’string’"></a>6.5.3.2cmd1&lt;&lt;&lt;’string’</h4><p>含义是 here-string ，表示传给给cmd的stdin的内容从这里开始是一个字符串。<br>范例：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bc</span> &lt;&lt;&lt;&#x27;<span class="hljs-number">2</span>+<span class="hljs-number">4</span>&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658634687295.png" srcset="/img/loading.gif" lazyload alt="1658634687295"></p><h2 id="6-6-tee命令"><a href="#6-6-tee命令" class="headerlink" title="6.6 tee命令"></a>6.6 tee命令</h2><p>tee命令用于读取标准输入的数据，并将其内容输出成文件。</p><p>tee指令会从标准输入设备读取数据，将其内容输出到标准输出设备，同时保存成文件。</p><p>选项：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">-<span class="hljs-selector-tag">a</span> 追加<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658643404404.png" srcset="/img/loading.gif" lazyload alt="1658643404404"></p><h1 id="7-用户和组相关概念"><a href="#7-用户和组相关概念" class="headerlink" title="7.用户和组相关概念"></a>7.用户和组相关概念</h1><h2 id="7-1-用户"><a href="#7-1-用户" class="headerlink" title="7.1 用户"></a>7.1 用户</h2><p>Linux中每个用户是通过 User Id （UID）来唯一标识的</p><ul><li><p>管理员：root, 0</p></li><li><p>普通用户：1-60000 自动分配</p><ul><li>系统用户：1-499 （CentOS 6以前）, 1-999 （CentOS 7以后）<br>对守护进程获取资源进行权限分配</li><li>登录用户：500+ （CentOS6以前）, 1000+（CentOS7以后）<br>给用户进行交互式登录使用</li></ul></li></ul><h2 id="7-2-用户组"><a href="#7-2-用户组" class="headerlink" title="7.2 用户组"></a>7.2 用户组</h2><p>Linux中可以将一个或多个用户加入用户组中，用户组是通过Group ID（GID） 来唯一标识的。</p><ul><li>管理员组：root, 0</li><li>普通组：<ul><li>系统组：1-499（CentOS 6以前）, 1-999（CentOS7以后）, 对守护进程获取资源进行权限分配</li><li>普通组：500+（CentOS 6以前）, 1000+（CentOS7以后）, 给用户使用</li></ul></li></ul><h2 id="7-3-用户和组的关系"><a href="#7-3-用户和组的关系" class="headerlink" title="7.3 用户和组的关系"></a>7.3 用户和组的关系</h2><ul><li>用户的主要组(primary group)：用户必须属于一个且只有一个主组，默认创建用户时会自动创建和用户名同名的组，做为用户的主要组，由于此组中只有一个用户，又称为私有组</li><li>用户的附加组(supplementary group)： 一个用户可以属于零个或多个辅助组，附属组</li></ul><p>范例：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@rocky8 home]# id yuankun<br><span class="hljs-attribute">uid</span>=1000(yuankun) <span class="hljs-attribute">gid</span>=1000(yuankun) <span class="hljs-attribute">groups</span>=1000(yuankun)<br></code></pre></td></tr></table></figure><h2 id="7-4用户和组的配置文件"><a href="#7-4用户和组的配置文件" class="headerlink" title="7.4用户和组的配置文件"></a>7.4用户和组的配置文件</h2><h3 id="7-4-1用户和组的主要配置文件"><a href="#7-4-1用户和组的主要配置文件" class="headerlink" title="7.4.1用户和组的主要配置文件"></a>7.4.1用户和组的主要配置文件</h3><ul><li>&#x2F;etc&#x2F;passwd：用户及其属性信息(名称、UID、主组ID等）</li><li>&#x2F;etc&#x2F;shadow：用户密码及其相关属性</li><li>&#x2F;etc&#x2F;group：组及其属性信息</li><li>&#x2F;etc&#x2F;gshadow：组密码及其相关属性</li></ul><h3 id="7-4-2-passwd文件格式"><a href="#7-4-2-passwd文件格式" class="headerlink" title="7.4.2 passwd文件格式"></a>7.4.2 passwd文件格式</h3><ul><li>login name：登录用名（yuankun）</li><li>passwd：密码 (x)</li><li>UID：用户身份编号 (1000)</li><li>GID：登录默认所在组编号 (1000)</li><li>GECOS：用户全名或注释</li><li>home directory：用户主目录 (&#x2F;home&#x2F;wang)</li><li>shell：用户默认使用shell (&#x2F;bin&#x2F;bash)</li></ul><p><img src="/../image.assets/1658659141980.png" srcset="/img/loading.gif" lazyload alt="1658659141980"></p><h3 id="7-4-3shadow文件格式"><a href="#7-4-3shadow文件格式" class="headerlink" title="7.4.3shadow文件格式"></a>7.4.3shadow文件格式</h3><ul><li>登录用名</li><li>用户密码:一般用sha512加密</li><li>从1970年1月1日起到密码最近一次被更改的时间</li><li>密码再过几天可以被变更（0表示随时可被变更）</li><li>密码再过几天必须被变更（99999表示永不过期）</li><li>密码过期前几天系统提醒用户（默认为一周）</li><li>密码过期几天后帐号会被锁定</li><li>从1970年1月1日算起，多少天后帐号失效<br><img src="/../image.assets/1658662334418.png" srcset="/img/loading.gif" lazyload alt="1658662334418"></li></ul><h3 id="7-4-4group文件格式"><a href="#7-4-4group文件格式" class="headerlink" title="7.4.4group文件格式"></a>7.4.4group文件格式</h3><ul><li>群组名称：就是群组名称</li><li>群组密码：通常不需要设定，密码是被记录在 &#x2F;etc&#x2F;gshadow</li><li>GID：就是群组的 ID</li><li>以当前组为附加组的用户列表(分隔符为逗号)</li></ul><p><img src="/../image.assets/1658662552564.png" srcset="/img/loading.gif" lazyload alt="1658662552564"></p><h3 id="7-4-5gshadow文件格式"><a href="#7-4-5gshadow文件格式" class="headerlink" title="7.4.5gshadow文件格式"></a>7.4.5gshadow文件格式</h3><ul><li>群组名称：就是群的名称</li><li>群组密码：</li><li>组管理员列表：组管理员的列表，更改组密码和成员</li><li>以当前组为附加组的用户列表：多个用户间用逗号分隔</li></ul><p><img src="/../image.assets/1658662641679.png" srcset="/img/loading.gif" lazyload alt="1658662641679"></p><h2 id="7-5-用户和组管理命令"><a href="#7-5-用户和组管理命令" class="headerlink" title="7.5 用户和组管理命令"></a>7.5 用户和组管理命令</h2><ul><li>用户管理命令<ul><li>useradd(添加用户)</li><li>usermod(修改用户)</li><li>userdel(删除用户)</li></ul></li><li>组账号维护命令<ul><li>groupadd</li><li>groupmod</li><li>groupdel</li></ul></li></ul><p>面试题：添加新用户后家目录下的文件来源什么地方？</p><p>来源于&#x2F;etc&#x2F;skel,进入&#x2F;etc&#x2F;skel下查看文件和进入test用户的家目录下查看文件是一致的</p><p><img src="/../image.assets/1658665374181.png" srcset="/img/loading.gif" lazyload alt="1658665374181"></p><p><img src="/../image.assets/1658665436871.png" srcset="/img/loading.gif" lazyload alt="1658665436871"></p><h3 id="7-5-1用户创建"><a href="#7-5-1用户创建" class="headerlink" title="7.5.1用户创建"></a>7.5.1用户创建</h3><p>useradd命令可以创建新的linux用户</p><p>格式：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">useradd [<span class="hljs-keyword">options</span>] <span class="hljs-keyword">login</span><br></code></pre></td></tr></table></figure><p>常见的选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-u UID</span><br><span class="hljs-deletion">-o 配合-u 选项，不检查UID的唯一性</span><br><span class="hljs-deletion">-g GID 指明用户所属基本组，可为组名，也可以GID</span><br><span class="hljs-deletion">-c &quot;COMMENT“ 用户的注释信息</span><br><span class="hljs-deletion">-d HOME_DIR 以指定的路径(不存在)为家目录</span><br><span class="hljs-deletion">-s SHELL 指明用户的默认shell程序，可用列表在/etc/shells文件中</span><br><span class="hljs-deletion">-G GROUP1[,GROUP2,...] 为用户指明附加组，组须事先存在</span><br><span class="hljs-deletion">-N 不创建私用组做主组，使用users组做主组</span><br><span class="hljs-deletion">-r 创建系统用户 CentOS 6之前: ID&lt;500，CentOS7 以后: ID&lt;1000</span><br><span class="hljs-deletion">-m 创建家目录，用于系统用户</span><br><span class="hljs-deletion">-M 不创建家目录，用于非系统用户</span><br><span class="hljs-deletion">-p 指定加密的密码</span><br></code></pre></td></tr></table></figure><p>范例:</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino">[root@rocky8 home]<span class="hljs-meta"># groupadd apache</span><br>[root@rocky8 home]<span class="hljs-meta"># useradd -r -u 48 -g apache -s /sbin/nologin -d /var/www -c <span class="hljs-string">&quot;Apache&quot;</span> apache</span><br></code></pre></td></tr></table></figure><p>useradd命令默认值设置由&#x2F;etc&#x2F;default&#x2F;useradd定义</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@centos8 ~]#cat <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/useradd<br># useradd defaults <span class="hljs-keyword">file</span><br><span class="hljs-keyword">GROUP</span>=<span class="hljs-number">100</span><br>HOME=/home<br>INACTIVE=-<span class="hljs-number">1</span> #对应<span class="hljs-regexp">/etc/</span>shadow文件第<span class="hljs-number">7</span>列，即用户密码过期后的帐号锁定的宽限期,-<span class="hljs-number">1</span>表示不锁定<br>EXPIRE= #对应<span class="hljs-regexp">/etc/</span>shadow文件第<span class="hljs-number">8</span>列，即用户帐号的有效期<br>SHELL=<span class="hljs-regexp">/bin/</span>bash<br>SKEL=<span class="hljs-regexp">/etc/</span>skel #用于生成新建用户家目录的模版文件<br>CREATE_MAIL_SPOOL=yes<br></code></pre></td></tr></table></figure><h3 id="7-5-2用户属性修改"><a href="#7-5-2用户属性修改" class="headerlink" title="7.5.2用户属性修改"></a>7.5.2用户属性修改</h3><p>usermod命令可以修改用户属性</p><p>格式：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">usermod [<span class="hljs-keyword">options</span>] <span class="hljs-keyword">login</span><br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-u UID: 新UID</span><br><span class="hljs-deletion">-g GID: 新主组</span><br><span class="hljs-deletion">-G GROUP1[,GROUP2,...[,GROUPN]]]：新附加组，原来的附加组将会被覆盖；若保留原有，则要同时使</span><br>用-a选项<br><span class="hljs-deletion">-s SHELL：新的默认SHELL</span><br><span class="hljs-deletion">-c &#x27;COMMENT&#x27;：新的注释信息</span><br><span class="hljs-deletion">-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用-m选项</span><br><span class="hljs-deletion">-l login_name: 新的名字</span><br><span class="hljs-deletion">-L: lock指定用户,在/etc/shadow 密码栏的增加 !</span><br><span class="hljs-deletion">-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉</span><br><span class="hljs-deletion">-e YYYY-MM-DD: 指明用户账号过期日期</span><br><span class="hljs-deletion">-f INACTIVE: 设定非活动期限，即宽限期</span><br></code></pre></td></tr></table></figure><p>范例：创建test用户，使用id username查看用户的uid,然后修改其uid</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@rocky8 home]<span class="hljs-comment"># useradd test   #添加tes用户</span><br>[root@rocky8 home]<span class="hljs-comment"># id test			#查看用户信息</span><br>uid=1001(<span class="hljs-built_in">test</span>) gid=1001(<span class="hljs-built_in">test</span>) <span class="hljs-built_in">groups</span>=1001(<span class="hljs-built_in">test</span>)<br>[root@rocky8 home]<span class="hljs-comment"># usermod -u 1002 test   # 将uid修改为1002</span><br>[root@rocky8 home]<span class="hljs-comment"># id test			#查看用户信息修改成功</span><br>uid=1002(<span class="hljs-built_in">test</span>) gid=1001(<span class="hljs-built_in">test</span>) <span class="hljs-built_in">groups</span>=1001(<span class="hljs-built_in">test</span>)<br></code></pre></td></tr></table></figure><h3 id="7-5-4删除用户"><a href="#7-5-4删除用户" class="headerlink" title="7.5.4删除用户"></a>7.5.4删除用户</h3><p>userdel可以删除用户</p><p>格式：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">userdel [<span class="hljs-keyword">options</span>] <span class="hljs-keyword">login</span><br></code></pre></td></tr></table></figure><p>常见的选项：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">-f, <span class="hljs-comment">--force 强制</span><br>-r, <span class="hljs-comment">--remove 删除用户家目录和邮箱</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">userdel -f <span class="hljs-built_in">test</span>  <span class="hljs-comment">#强制删除</span><br>userdel -rf <span class="hljs-built_in">test</span> <span class="hljs-comment"># 删除家目录和邮箱</span><br></code></pre></td></tr></table></figure><h3 id="7-5-5查看用户相关ID"><a href="#7-5-5查看用户相关ID" class="headerlink" title="7.5.5查看用户相关ID"></a>7.5.5查看用户相关ID</h3><p>id命令可以查看用户的UID、GID等信息</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">id <span class="hljs-selector-attr">[options]</span> <span class="hljs-selector-attr">[username]</span><br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-u: 显示UID</span><br><span class="hljs-deletion">-g: 显示GID</span><br><span class="hljs-deletion">-G: 显示用户所属的组的ID</span><br><span class="hljs-deletion">-n: 显示名称，需配合ugG使用</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@rocky8</span> home]<span class="hljs-meta"># id test</span><br>uid=<span class="hljs-number">1002</span>(test) gid=<span class="hljs-number">1001</span>(test) groups=<span class="hljs-number">1001</span>(test)<br>[root<span class="hljs-symbol">@rocky8</span> home]<span class="hljs-meta"># id -u test</span><br><span class="hljs-number">1002</span><br>[root<span class="hljs-symbol">@rocky8</span> home]<span class="hljs-meta"># id -g test</span><br><span class="hljs-number">1001</span><br>[root<span class="hljs-symbol">@rocky8</span> home]<span class="hljs-meta"># id -G test</span><br><span class="hljs-number">1001</span><br>[root<span class="hljs-symbol">@rocky8</span> home]<span class="hljs-meta"># </span><br></code></pre></td></tr></table></figure><h3 id="7-5-6查看linux所有用户"><a href="#7-5-6查看linux所有用户" class="headerlink" title="7.5.6查看linux所有用户"></a>7.5.6查看linux所有用户</h3><ul><li>查看&#x2F;etc&#x2F;passwd</li></ul><p><img src="/../image.assets/1658664876880.png" srcset="/img/loading.gif" lazyload alt="1658664876880"></p><ul><li>getent passwd</li></ul><p><img src="/../image.assets/1658664946447.png" srcset="/img/loading.gif" lazyload alt="1658664946447"></p><h3 id="7-5-7切换用户"><a href="#7-5-7切换用户" class="headerlink" title="7.5.7切换用户"></a>7.5.7切换用户</h3><p>su: 即 switch user，命令可以切换用户身份，并且以指定用户的身份执行命令<br>格式：</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">su <span class="hljs-comment">[options...]</span> <span class="hljs-comment">[-]</span> <span class="hljs-comment">[user <span class="hljs-comment">[args...]</span>]</span><br></code></pre></td></tr></table></figure><p>常见的选项</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">-<span class="hljs-keyword">l</span> --login su -<span class="hljs-keyword">l</span> UserName 相当于 su - UserName<br>-<span class="hljs-keyword">c</span>, --<span class="hljs-keyword">command</span> <span class="hljs-symbol">&lt;command&gt;</span> pass <span class="hljs-keyword">a</span> single <span class="hljs-keyword">command</span> <span class="hljs-keyword">to</span> the <span class="hljs-keyword">shell</span> with -<span class="hljs-keyword">c</span><br></code></pre></td></tr></table></figure><p>切换用户的方式：</p><ul><li>su UserName：非登录式切换，即不会读取目标用户的配置文件，不改变当前工作目录，即不完全切换</li><li>su - UserName：登录式切换，会读取目标用户的配置文件，切换至自已的家目录，即完全切换<br>说明：root su至其他用户无须密码；非root用户切换时需要密码<br>注意：su 切换新用户后，使用 exit 退回至旧的用户身份，而不要再用 su 切换至旧用户，否则会生成很多的bash子进程，环境可能会混乱。</li></ul><p>换个身份执行命令：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">su</span> - username -c <span class="hljs-string">&#x27;command&#x27;</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[root<span class="hljs-variable">@rocky8</span> skel]<span class="hljs-comment"># su - test -c &#x27;touch test.log&#x27;</span><br>[root<span class="hljs-variable">@rocky8</span> skel]<span class="hljs-comment"># su test</span><br>[test<span class="hljs-variable">@rocky8</span> skel]<span class="hljs-variable">$ </span>ll<br>total <span class="hljs-number">0</span><br>[test<span class="hljs-variable">@rocky8</span> skel]<span class="hljs-variable">$ </span>ls -a<br>.  ..  .bash_logout  .bash_profile  .bashrc<br>[test<span class="hljs-variable">@rocky8</span> skel]<span class="hljs-variable">$ </span>cd /home/<br>[test<span class="hljs-variable">@rocky8</span> home]<span class="hljs-variable">$ </span>ll<br>total <span class="hljs-number">0</span><br>drwx------. <span class="hljs-number">2</span> test    test     <span class="hljs-number">99</span> Jul <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span> test<br>drwx------. <span class="hljs-number">2</span> test1   test1    <span class="hljs-number">78</span> Jul <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">24</span> test1<br>drwx------. <span class="hljs-number">2</span> yuankun yuankun <span class="hljs-number">114</span> Jul <span class="hljs-number">23</span> <span class="hljs-number">0</span>8:<span class="hljs-number">24</span> yuankun<br>[test<span class="hljs-variable">@rocky8</span> home]<span class="hljs-variable">$ </span>cd test<br>[test<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-variable">$ </span>ll<br>total <span class="hljs-number">0</span><br>-rw-rw-r--. <span class="hljs-number">1</span> test test <span class="hljs-number">0</span> Jul <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span> test.log<br>[test<span class="hljs-variable">@rocky8</span> ~]<span class="hljs-variable">$ </span><br><br></code></pre></td></tr></table></figure><h3 id="7-5-8设置密码"><a href="#7-5-8设置密码" class="headerlink" title="7.5.8设置密码"></a>7.5.8设置密码</h3><p>passwd 可以修改用户密码</p><p>格式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">passwd <span class="hljs-selector-attr">[options]</span> username<br></code></pre></td></tr></table></figure><p>常见选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-d：删除指定用户密码</span><br><span class="hljs-deletion">-l：锁定指定用户</span><br><span class="hljs-deletion">-u：解锁指定用户</span><br><span class="hljs-deletion">-e：强制用户下次登录修改密码</span><br><span class="hljs-deletion">-f：强制操作</span><br><span class="hljs-deletion">-n mindays：指定最短使用期限</span><br><span class="hljs-deletion">-x maxdays：最大使用期限</span><br><span class="hljs-deletion">-w warndays：提前多少天开始警告</span><br><span class="hljs-deletion">-i inactivedays：非活动期限</span><br><span class="hljs-deletion">--stdin：从标准输入接收用户密码,Ubuntu无此选项</span><br></code></pre></td></tr></table></figure><p>范例：非交互式修改用户密码</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-comment">#此方式更通用，适用于各种Linux版本，如:ubuntu</span><br>root<span class="hljs-variable">@ununtu2004</span><span class="hljs-symbol">:/home</span><span class="hljs-comment"># echo -e &#x27;123456\n123456&#x27; | passwd test</span><br><span class="hljs-title class_">New</span> <span class="hljs-symbol">password:</span> <span class="hljs-title class_">Retype</span> new <span class="hljs-symbol">password:</span> <span class="hljs-symbol">passwd:</span> password updated successfully<br>root<span class="hljs-variable">@ununtu2004</span><span class="hljs-symbol">:/home</span><span class="hljs-comment"># </span><br><br><span class="hljs-comment">#适用于红帽系列的Linux版本</span><br>[root<span class="hljs-variable">@rocky8</span> home]<span class="hljs-comment"># echo -e &#x27;123456&#x27;| passwd --stdin test</span><br><span class="hljs-title class_">Changing</span> password <span class="hljs-keyword">for</span> user test.<br><span class="hljs-symbol">passwd:</span> all authentication tokens updated successfully.<br>[root<span class="hljs-variable">@rocky8</span> home]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><h2 id="7-6文件权限管理"><a href="#7-6文件权限管理" class="headerlink" title="7.6文件权限管理"></a>7.6文件权限管理</h2><h3 id="7-6-1文件所有者和属组属性操作"><a href="#7-6-1文件所有者和属组属性操作" class="headerlink" title="7.6.1文件所有者和属组属性操作"></a>7.6.1文件所有者和属组属性操作</h3><h4 id="7-6-1-1设置文件的所有者chown"><a href="#7-6-1-1设置文件的所有者chown" class="headerlink" title="7.6.1.1设置文件的所有者chown"></a>7.6.1.1设置文件的所有者chown</h4><p>chown 命令可以修改文件的属主，也可以修改文件属组<br>格式：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">chown [<span class="hljs-symbol">OPTION</span>]... [<span class="hljs-symbol">OWNER</span>][:[<span class="hljs-symbol">GROUP</span>]] <span class="hljs-symbol">FILE</span>...<br>chown [<span class="hljs-symbol">OPTION</span>]... --reference=<span class="hljs-symbol">RFILE</span> <span class="hljs-symbol">FILE</span>...<br></code></pre></td></tr></table></figure><p>用法说明：</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ldif">OWNER <span class="hljs-comment">#只修改所有者</span><br><span class="hljs-attribute">OWNER</span>:GROUP <span class="hljs-comment">#同时修改所有者和属组</span><br>:GROUP <span class="hljs-comment">#只修改属组，冒号也可用 . 替换</span><br><span class="hljs-literal">-</span>-reference=RFILE <span class="hljs-comment">#参考指定的的属性，来修改</span><br><span class="hljs-literal">-</span>R	<span class="hljs-comment">#递归，此选项慎用，非常危险！</span><br></code></pre></td></tr></table></figure><p>范例：</p><ul><li>修改所有者</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs linux">[root@rocky8 home]# touch data.log<br>[root@rocky8 home]# ll				# data.log所有者为root<br>total 0<br>-rw-r--r--. 1 root    root      0 Jul 24 13:16 data.log<br>drwx------. 2 gentoo  gentoo   62 Jul 24 12:39 gentoo<br>drwx------. 2 test    test     99 Jul 24 11:38 test<br>drwx------. 2 test1   test1    78 Jul 24 11:24 test1<br>drwx------. 2 yuankun yuankun 114 Jul 23 08:24 yuankun<br>[root@rocky8 home]# chown yuankun data.log # 修改所有者为yuankun<br>[root@rocky8 home]# ll<br>total 0<br>-rw-r--r--. 1 yuankun root      0 Jul 24 13:16 data.log<br>drwx------. 2 gentoo  gentoo   62 Jul 24 12:39 gentoo<br>drwx------. 2 test    test     99 Jul 24 11:38 test<br>drwx------. 2 test1   test1    78 Jul 24 11:24 test1<br>drwx------. 2 yuankun yuankun 114 Jul 23 08:24 yuankun<br>[root@rocky8 home]# <br></code></pre></td></tr></table></figure><ul><li>修改所属组</li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">chown :bin <span class="hljs-keyword">data</span>.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658672497952.png" srcset="/img/loading.gif" lazyload alt="1658672497952"></p><ul><li>同时修改所有者和所属组</li></ul><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@rocky8 home]<span class="hljs-comment"># touch test.log</span><br>[root@rocky8 home]<span class="hljs-comment"># </span><br>[root@rocky8 home]<span class="hljs-comment"># </span><br>[root@rocky8 home]<span class="hljs-comment"># chown yuankun:bin test.log   # 冒号用.替换也可以</span><br>[root@rocky8 home]<span class="hljs-comment"># ll</span><br>total 0<br>-rw-r--r--.<span class="hljs-number"> 1 </span>yuankun bin      <span class="hljs-number"> 0 </span>Jul<span class="hljs-number"> 24 </span>13:16 data.log<br>drwx------.<span class="hljs-number"> 2 </span>gentoo  gentoo  <span class="hljs-number"> 62 </span>Jul<span class="hljs-number"> 24 </span>12:39 gentoo<br>drwx------.<span class="hljs-number"> 2 </span>test    test    <span class="hljs-number"> 99 </span>Jul<span class="hljs-number"> 24 </span>11:38 test<br>drwx------.<span class="hljs-number"> 2 </span>test1   test1   <span class="hljs-number"> 78 </span>Jul<span class="hljs-number"> 24 </span>11:24 test1<br>-rw-r--r--.<span class="hljs-number"> 1 </span>yuankun bin      <span class="hljs-number"> 0 </span>Jul<span class="hljs-number"> 24 </span>13:22 test.log<br>drwx------.<span class="hljs-number"> 2 </span>yuankun yuankun<span class="hljs-number"> 114 </span>Jul<span class="hljs-number"> 23 </span>08:24 yuankun<br>[root@rocky8 home]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658672628070.png" srcset="/img/loading.gif" lazyload alt="1658672628070"></p><ul><li>修改为参考的所有者户所属组</li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">chown --reference=root.<span class="hljs-built_in">log</span> <span class="hljs-keyword">data</span>.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658672912639.png" srcset="/img/loading.gif" lazyload alt="1658672912639"></p><ul><li>递归修改</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span> -R yuankun:yuankun ./data/mysql/<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658673109132.png" srcset="/img/loading.gif" lazyload alt="1658673109132"></p><h4 id="7-6-1-2设置文件的属组信息chgrp"><a href="#7-6-1-2设置文件的属组信息chgrp" class="headerlink" title="7.6.1.2设置文件的属组信息chgrp"></a>7.6.1.2设置文件的属组信息chgrp</h4><p>chgrp 命令可以只修改文件的属组<br>格式:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">chgrp [OPTION]<span class="hljs-string">...</span> GROUP FILE.<span class="hljs-string">..</span><br>chgrp [OPTION]<span class="hljs-string">...</span> <span class="hljs-params">--reference=RFILE</span> FILE.<span class="hljs-string">..</span><br></code></pre></td></tr></table></figure><p>-R 递归</p><p>范例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chgrp</span> yuankun data.log<br></code></pre></td></tr></table></figure><p><img src="/../image.assets/1658673362886.png" srcset="/img/loading.gif" lazyload alt="1658673362886"></p><h3 id="7-6-2文件权限"><a href="#7-6-2文件权限" class="headerlink" title="7.6.2文件权限"></a>7.6.2文件权限</h3><p>每个文件针对每类访问者都定义了三种权限</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">r</span> Readable <span class="hljs-number">4</span><br><span class="hljs-attribute">w</span> Writable <span class="hljs-number">2</span><br><span class="hljs-attribute">x</span> eXcutable <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>对文件的权限</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">r</span> 可使用文件查看类工具，比如：<span class="hljs-built_in">cat</span>，可以获取其内容<br>w 可修改其内容,文件的是否被删除和文件的权限无关<br>x 可以把此文件提请内核启动为一个进程，即可以执行（运行）此文件（此文件的内容必须是可执行）<br>文件权限常见组合<br><span class="hljs-literal">---</span> <span class="hljs-number">0</span><br><span class="hljs-built_in">r</span> <span class="hljs-number">4</span><br><span class="hljs-built_in">r</span><span class="hljs-literal">-x</span> <span class="hljs-number">5</span><br>rw <span class="hljs-number">6</span><br>rwx <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><p>对目录的权限</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs llvm">r 可以使用ls查看此目录中文件名列表<span class="hljs-punctuation">,</span>但无法看到文件的属性meta信息<span class="hljs-punctuation">,</span>包括inode号<span class="hljs-punctuation">,</span>不能查看文件的<br>内容<br>w 可在此目录中创建文件，也可删除此目录中的文件，而和此被删除的文件的权限无关<br><span class="hljs-keyword">x</span> 可以cd进入此目录，可以使用ls -l file或stat file 查看此目录中指定文件的元数据，当预先知<br>道文件名称时<span class="hljs-punctuation">,</span>也可以查看文件的内容<span class="hljs-punctuation">,</span>属于目录的可访问的最小权限<br>X 分配给目录或有部分<span class="hljs-keyword">x</span>权限的文件的<span class="hljs-keyword">x</span>权限，对无任意<span class="hljs-keyword">x</span>权限的文件则不会分配<span class="hljs-keyword">x</span>权限<br>目录权限常见组合<br>- 不能访问目录<br>r-<span class="hljs-keyword">x</span> 只读目录<br>rwx 可读也可写目录<br></code></pre></td></tr></table></figure><p>面试题：Linux中的目录和文件的权限区别？分别说明读，写和执行权限的区别?</p><p>修改文件权限chmod</p><p>面试题：执行 cp &#x2F;etc&#x2F;issue &#x2F;data&#x2F;dir&#x2F; 所需要的最小权限？</p></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/">#Linux从入门到放弃</a></div></div><div class="license-box my-3"><div class="license-title"><div>Linux文件管理</div><div>https://itshare.work/2022/07/23/文件管理/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>勒马听风</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年7月23日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年11月13日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/07/23/TheInterviewQuestions/" title="Linux运维面试葵花宝典"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Linux运维面试葵花宝典</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/07/18/linux%E5%9F%BA%E7%A1%80%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="linux基础和常用命令"><span class="hidden-mobile">linux基础和常用命令</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"hQDROocUhxVs3CipuQjO33sY-gzGzoHsz",appKey:"CHcmi9bz6KRRaChFJVSY14g1",path:"window.location.pathname",placeholder:"请在这里书写你想说的话······",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><span>由<a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>强力驱动</span> <i class="iconfont icon-love"></i> <span>主题</span> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <i class="iconfont icon-love"></i> <span>©2022</span></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访问客数 <span id="leancloud-site-uv"></span> 人</span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">黔ICP备2022006994号-2 </a></span><span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=http://beian.miit.gov.cn/" rel="nofollow noopener" class="beian-police" target="_blank"><span style="visibility:hidden;width:0">|</span> <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"> <span>黔公网安备2022006994号</span></a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/caidai.js"></script><script src="/js/love.main.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>